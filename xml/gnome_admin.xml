<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<!--taroth 081017: regarding firefox bridge and lockdown, also check out
 the following fate entries: #301534, 302023, 302024, 302911-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="cha.gnome-configuration">
 <title>&gnome; Configuration for Administrators</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
    <dm:bugtracker>
    </dm:bugtracker>
    <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    This chapter introduces &gnome; configuration options which administrators
    can use to adjust system-wide settings, such as customizing menus,
    installing themes, configuring fonts, changing preferred applications, and
    locking down capabilities.
   </para>
  </abstract>
 </info>

 <sect1 xml:id="sec.gnome-configuration.dconf">
  <title>The dconfg System</title>

  <para>
   The &gnome; desktop manages its configuration with
   <literal>dconf</literal>. It is a hierarchically structured database
   or registry where the user can change their own settings, and the
   system administrator can set default or mandatory values for all
   users. <literal>dconf</literal> replaces the
   <literal>gconf</literal> of &gnome; 2.
  </para>

  <para>
   Use <command>dconf-editor</command> to view the dconf options with a
   graphical user interface. Use <command>dconf</command> to access and
   change configuration options with the command line.
  </para>

  <para>
   The &gnome; <literal>Tweaks</literal> tool provides an easy to use
   user interface for a additional configurations options beyond the
   normal &gnome; configuration. The tool can be started from the
   &gnome; application menu or from the command line with
   <command>gnome-tweak-tool</command>.
  </para>
 </sect1>

 <sect1 xml:id="sec.gnome-configuration.global">
  <title>System-wide Configuration</title>
  <para>
   Global <literal>dconf</literal> configuration parameters can be set
   in the <filename>/etc/dconf/db/</filename> directory. This includes
   the configuration for GDM or locking certain configuration options
   for users.
  </para>
  <para>
   Use the following procedure as an example to create a system-wide
   configuration:
  </para>
  <procedure>
   <step>
    <para>
     Create a new directory that ends with a <literal>.d</literal> in
     <filename>/etc/dconf/db/</filename>. This directory can contain an
     arbitrary amount of text files with configuration options. For this
     example, create the file
     <filename>/etc/dconf/db/network/00-proxy</filename> with the
     following content:
    </para>
    <screen># This is a comment
[system/proxy/http]
host='10.0.0.1'
enabled=true</screen>
   </step>
   <step>
    <para>
     Parse the new configuration directives into the dconf database format:
    </para>
    <screen>&prompt.sudo;<command>dconf update</command></screen>
   </step>
   <step>
    <para>
     Add the new <literal>network</literal> configuration database to
     the default user profile, by creating the file <filename>/etc/dconf/profiles/user</filename>.
     Then add the following content:
    </para>
    <screen>system-db:network</screen>
    <para>
     The file <filename>/etc/dconf/profiles/user</filename> is a &gnome;
     default that will be used. Other profiles can be defined in the
     environment variable <literal>DCONF_PROFILE</literal>.
    </para>
   </step>
   <step>
    <para>
     Optional: To lock the proxy configuration for users, create the file
     <filename>/etc/dconf/db/network/locks/proxy</filename>. Then add
     a line to this file with the keys that may not be changed:
    </para>
    <screen>/system/proxy/http/host
/system/proxy/http/enabled</screen>
   </step>
  </procedure>
  <para>
   You can use the graphical <command>dconf-editor</command> to create a
   profile with one user and then use <command>dconf dump /</command>
   to list all configuration options. The configuration options can
   then be stored in a global profile.
  </para>
  <para>
   A detailed description of the global configuration is available at
   <link xlink:href="https://wiki.gnome.org/Projects/dconf/SystemAdministrators"/>.
  </para>
 </sect1>

 <sect1 xml:id="sec.gnome-configuration.more-info">
  <title>More Information</title>
  <para>
   For more information, see
   <link xlink:href="http://help.gnome.org/admin/"/>.
  </para>
 </sect1>
</chapter>
