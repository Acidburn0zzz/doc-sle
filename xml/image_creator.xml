<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!--
Mail from Jiří Suchomel, 2008-11-19

Product Creator is the tool for 
a) creating new products to the installable form (directory with correct 
product metadata, or iso image which you could burn to DVD and install from 
it)
b) use such configuration to create kiwi-based images (USB stick image, live 
CD iso etc.)

The configuration in part b can be reused from part a, that's why it is all in 
one tool called Product Creator.
On the other hand, the part b could work independently, as a 
front-end for kiwi, so this part can be started stand-alone and is called 
Image Creator.

To make it more interesting, we also have the module called Add-On creator, 
which is used for creating Add-On products (similar to e.g. Language Add-On 
for openSUSE or SDK for SLE).

-->
<chapter id="cha.imgcreator">
 <title>Creating Images with &yast; &imgcreator;</title>
 <abstract>
  <para>
   The &yast; &imgcreator; is a graphical interface for the &kiwi; imaging
   tool. With &imgcreator;, you can create a new &kiwi; configuration, or
   import an existing one and modify it, then build the image after the
   configuration is complete. Advanced users can save the configuration to
   disk, then modify it and build the image manually.
   </para>
   <para>
    To be able to use it
   you need to install the package
   <systemitem class="resource">yast2-product-creator</systemitem> from the
   &sdk;. The SDK is an add-on product for &sle; and is available for
   download from <ulink url="https://download.suse.com/"/>. Search for
   <literal>&sle; Software Development Kit</literal>.
  </para>
 </abstract>
 <sect1 id="sec.img.create">
  <title>Creating Images</title>

  <para>
   To create an image of a product, proceed as follows:
  </para>

  <procedure>
   <step>
    <para>
     Start &yast; and open the <guimenu>&imgcreator;</guimenu> module.
    </para>
   </step>
   <step>
    <para>
     The window shows a list of all existing images configuration. You may
     <guimenu>Edit</guimenu> or <guimenu>Delete</guimenu> them. Choose
     <guimenu>Add</guimenu> to create a new one.
    </para>
   </step>
   <step>
    <para>
     Enter the name for the new <guimenu>Kiwi Configuration</guimenu>, and
     choose whether you want to begin from scratch, or base on exisiting
     &kiwi; configuration. In the latter case, provide a path to the
     existing &kiwi; configuratio so that &imgcreator; can import it.
    </para>
   </step>
   <step>
    <para>
     Choose the image type you need to build. There are several options -
     <guimenu>Live ISO Image</guimenu>, <guimenu>&xen; Image</guimenu>, or
     <guimenu>Virtual Disk Image</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Select the output directory weher you want to store the &kiwi;
     configuration.
    </para>
   </step>
   <step>
    <para>
     If you are running &imgcreator; on a 64bit architecture, you can force
     &kiwi; to configure the image for 32bit architecture, and, moreover,
     limit it to i586 only.
    </para>
   </step>
   <step>
    <para>
     Add the list of package repositories you need to use for your &kiwi;
     configuration. Click <guimenu>Add</guimenu> to add a new repository, or
     <guimenu>Add from System</guimenu> to add repositories that are
     configured in the system where &imgcreator; is running. If you need to
     modify details of an existing repository, select it and click
     <guimenu>Edit</guimenu>. To remove an uneeded repository, select it and
     click <guimenu>Delete</guimenu>.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   <figure id="fig.imgcreator.repos">
    <title>Editing Repository in &imgcreator;</title>
    <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="image_creator.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="image_creator.png" width="100%"/>
    </imageobject>
    </mediaobject>
   </figure>
   </step>
   <!-- 2014-06-26 tbazant finished here -->
   <step>
    <para>
     Select the base source from the list of repositories chosen in the
     previous step. If the resulting iso image should be bootable, it must
     contain a <filename>/boot</filename> directory containing files needed
     to boot the system.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Enter the path in which to create the skeleton directory in the
     <guimenu>Product Creator Configuration</guimenu> screen. Choose whether
     to generate an ISO file or a directory tree.
    </para>
    <para>
     Activating <guimenu>Copy only needed files</guimenu> saves space.
     Optionally enter credits by specifying the <guimenu>CD
     Publisher</guimenu> and the <guimenu>CD Preparer</guimenu>.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Edit the content of the <filename>isolinux.cfg</filename> file, if it
     is a part of the configuration. In most cases you can leave it as it
     is. If the file is not part of the configuration, add it now with
     <guimenu>Load File</guimenu>.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Select the software packages to be included in the product. The default
     view lets you select patterns. Choose <guimenu>Details</guimenu> to be
     able to select individual packages. The solver tries to solve all
     package dependencies automatically whenever you select new packages. In
     case it fails, you need to manually resolve the conflict. If a conflict
     cannot be solved, a source providing a needed package may be missing.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Sign your product with <guimenu>Digitally Sign the Product on the
     Medium</guimenu>, if needed. Provide a key for your product
     configuration. Signing your product with your &gpg; key provides
     evidence of the origin of your product.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Check your settings in the configuration summary and proceed with
     <guimenu>Finish</guimenu>. Choose the <guimenu>Back</guimenu> buttons
     to change a setting.
    </para>
   </step>
  </procedure>

  <para>
   Your product definition is now completed. The &productcreator; allows you
   to choose from the following actions:
  </para>

  <itemizedlist>
   <listitem>
    <formalpara>
     <title><guimenu>Create Product</guimenu></title>
     <para>
      Creates an ISO image of the selected product. If there is something
      missing, the process will be aborted. Correct the error and repeat the
      configuration.
     </para>
    </formalpara>
   </listitem>
   <listitem>
    <formalpara>
     <title><guimenu>Create Image with KIWI...</guimenu></title>
     <para>
      Use the pull-down menu to choose from different target formats, such
      as Live media or Xen images.
     </para>
    </formalpara>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
