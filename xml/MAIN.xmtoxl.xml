<?xml version="1.0"?>
<!DOCTYPE article PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>

<article id="article.xmtoxl" lang="en">
 <?suse-quickstart color="suse"?>
 <title>XM, XL Toolstacks and Libvirt framework</title>
 <articleinfo>
  <productname>&sle; &productname;</productname>
  <date>August 6, 2014</date>
 </articleinfo>
 
 <sect1 id="sec.xmtoxl.intro">
  <title>&xen; Toolstacks</title>
  <para>
   XL toolstack was introduced in the &xen; 4.1 release, however <command>xend</command> remained the
   default on a SLE11SP3. On &sle; 12 <command>xend</command> is deprecated and has been removed, 
   XL must be used by default.
   XL is based on the xenlight library (libxl), a small lower-level library,
   written in C. It has been designed to provide a simple API for all
   toolstacks (<ulink url="http://wiki.xen.org/wiki/XAPI">XAPI</ulink>,
   &libvirt;, XL).
   &sle; products provide the &libvirt; framework and the XL toolstack.
  </para>
  <sect2 id="sec.xmtoxl.upgrade">
   <title>Upgrading from XM to XL</title>
   <para>
    The XL toolstack was intended to remain backwards compatible with existing
    XM domain configuration files. So all your previous configurations should
    be usable with XL. To easily manage an existing domain configuration with
    &libvirt; a new tool called <command>xen2libvirt</command> is available.
    See the <xref linkend="xen.xen2libvirt"/> for more information on this tool.
   </para>
  </sect2>
  <sect2 id="sec.xmltoxl.design">
   <title>XL design</title>
   <para>
    The basic structure of every <command>xl</command> command is almost
   always:</para>
   <screen><command>xl subcommand <option>OPTIONS</option> <replaceable>DOMAIN</replaceable></command></screen>
   <para>
    <replaceable>DOMAIN</replaceable> is the numeric domain id, or the domain
    name (which will be internally translated to domain id), and <replaceable>OPTIONS</replaceable> are subcommand
    specific options. 
   </para>
   <para>
    XL design was not intended to provide all previous XM features.
    The following features previously available under XM are not supported
    anymore by XL:
   </para>
   <itemizedlist>
   <listitem>
    <para>
     Management of domain: you should now use &libvirt; or <command>xl</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     Python code in configuration file.
    </para>
   </listitem>
   <listitem>
    <para>
     Creating domains from SXP format configuration files (<command>xm create -F</command>).
    </para>
   </listitem>
   <listitem>
    <para>
     Sharing storage across DomU's via <command>w!</command> in virtual machines configuration
     files.
    </para>
   </listitem>
   <listitem>
    <para>
     SCSI LUN/Host passthrough (PVSCSI)
    </para>
   </listitem>
   <listitem>
    <para>
     USB passthrough (PVUSB)
    </para>
   </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 id="sec.xmtoxl.checklist">
   <title>Checklist before Upgrade</title>
   <para>
   Before doing any migration from XM to XL:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      You must configure your host networking using the configuration tools.
     </para>
    </listitem>
    <listitem>
     <para>
      You must remove any Python code from your domU configuration files.
     </para>
    </listitem>
    <listitem>
     <para>
      <command>xend</command> should be disable at startup.
     </para>
    </listitem>
    <listitem>
     <para>
      <command>xl</command> should be used instead of <command>xm</command> command.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>

 <!-- xen2libvirt -->
 <xi:include href="xm_vs_xl_xen2libvirt.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
 <!-- xm vs xl -->
 <xi:include href="xm_vs_xl.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
 <!-- external ref -->
 <xi:include href="xm_vs_xl_links.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
 <!-- Legal Stuff -->
 <xi:include href="common_copyright_quick.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
 <!-- Glossary -->
 <xi:include href="xm_vs_xl_glossary.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>

</article>
