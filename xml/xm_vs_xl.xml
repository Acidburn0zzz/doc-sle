<?xml version="1.0"?>
<!DOCTYPE article PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>


<sect1 id="sec.xmvsxl">
 <title>XM and XL Toolstacks Differences</title>
 <para>
  The purpose of this chapter is to list all differences between
  <command>xm</command> and <command>xl</command>
  commands line.
 </para>
 <sect2 id="sec.xmvsxl.conventions">
  <title>Notation Conventions</title>
  <para>To easily understand the difference between <command>xl</command>
  and <command>xm</command> commands, we will use the following notation conventions:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <emphasis>(*) asterix</emphasis>: option changed, the option has some minor change.
    </para>
   </listitem>
   <listitem>
    <para>
     <emphasis>(-) minus</emphasis>: option exists in <command>xm</command>, but 
     <command>xl</command> doesn't include it.
    </para>
   </listitem>
   <listitem>
    <para>
     <emphasis>(+) plus</emphasis>: option exist in <command>xl</command>, but
     <command>xm</command> doesn't include it.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 id="sec.xmvsxl.global">
  <title>New Global Options</title>
  <para>
   Newly <command>xl</command> global options available:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <emphasis>(+) -v</emphasis>: Verbose, increase the verbosity of the output.
    </para>
   </listitem>
   <listitem>
    <para>
     <emphasis>(+) -N</emphasis>: Dry run, do not actually execute the command.
    </para>
   </listitem>
   <listitem>
    <para>
     <emphasis>(+) -f</emphasis>: Force execution. <command>xl</command> will refuse to run some
     commands if it detects that <command>xend</command> is also running, this option will 
     force the execution of those commands, even though it is unsafe.
    </para>
   </listitem>
  </itemizedlist>
 </sect2> 
 
 <sect2 id="sec.xmvsxl.common">
  <title>Unchanged Options</title>
  <para>
   List of common options between <command>xl</command> and <command>xm</command> commands:
  </para>
  <itemizedlist>
   <listitem><para>destroy &lt;Domain&gt;</para></listitem>
   <listitem><para>domid &lt;DomainName&gt;</para></listitem>
   <listitem><para>domname &lt;DomainId&gt;</para></listitem>
   <listitem><para>help</para></listitem>
   <listitem><para>pause &lt;Domain&gt;</para></listitem>
   <listitem><para>unpause &lt;Domain&gt;</para></listitem>
   <listitem><para>rename &lt;Domain&gt; &lt;NewDomainName&gt;</para></listitem>
   <listitem><para>sysrq &lt;Domain&gt; &lt;letter&gt;</para></listitem>
   <listitem><para>vncviewer [options] &lt;Domain&gt;</para></listitem>
   <listitem><para>vcpu-set &lt;Domain&gt; &lt;vCPUs&gt;</para></listitem>
   <listitem><para>vcpu-list [Domain, ...]</para></listitem>
   <listitem><para>vcpu-pin &lt;Domain&gt; &lt;VCPU|all&gt; &lt;CPUs|all&gt;</para></listitem>
   <listitem><para>dmesg [-c]</para></listitem>
   <listitem><para>top</para></listitem>
   <listitem><para>uptime [-s] [Domain]</para></listitem>
   <listitem><para>debug-keys &lt;Keys&gt;</para></listitem>
   <listitem><para>cpupool-migrate domain cpu-pool</para></listitem>
   <listitem><para>cpupool-destroy cpu-pool</para></listitem>
   <listitem><para>block-detach &lt;Domain&gt; &lt;DevId&gt;</para></listitem>
   <listitem><para>network-attach domain-id network-device</para></listitem>
   <listitem><para>pci-attach &lt;Domain&gt; &lt;BDF&gt; [Virtual Slot]</para></listitem>
   <listitem><para>pci-list &lt;domain&gt;</para></listitem>
   <listitem><para>tmem-list [-l] [&lt;Domain&gt;|-a]</para></listitem>
   <listitem><para>tmem-thaw [&lt;Domain&gt;|-a]</para></listitem>
   <listitem><para>tmem-freeze [&lt;Domain&gt;|-a]</para></listitem>
   <listitem><para>tmem-shared-auth [&lt;Domain&gt;|-a] [-u[=UUID] [-A[=AUTH]</para></listitem>
   <listitem><para>tmem-freeable</para></listitem>
   <listitem><para>getenforce</para></listitem>
   <listitem><para>setenforce &lt;1|0|Enforcing|Permissive&gt;</para></listitem>
  </itemizedlist>
 </sect2>
 <sect2 id="sec.xmvsxl.removed">
  <title>Removed Options</title>
  <remark>
   aginies 2014/08/05: if possible a solution must be provided for all removed options
  </remark>
  <para>
   List of options no more available with the <command>xl</command> command
   and solutions.
  </para>
  <sect3 id="sec.xmvsxl.removed.domain">
   <title>Domain Management</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) log</para></listitem>
    <listitem><para>(-) delete</para></listitem>
    <listitem><para>(-) new</para></listitem>
    <listitem><para>(-) start</para></listitem>
    <listitem><para>(-) dry-run</para></listitem>
    <listitem><para>(-) reset</para></listitem>
    <listitem><para>(-) domstate</para></listitem>
    <listitem><para>(-) serve</para></listitem>
    <listitem><para>(-) resume domain-name <replaceable>[OPTIONS]</replaceable></para></listitem>
    <listitem><para>(-) suspend domain-name</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.devices">
   <title>Attach/Detach Devices</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) usb-add</para></listitem>
    <listitem><para>(-) usb-del</para></listitem>
    <listitem><para>(-) scsi-attach</para></listitem>
    <listitem><para>(-) scsi-detach</para></listitem>
    <listitem><para>(-) scsi-list</para></listitem>
    <listitem><para>(-) usb-attach</para></listitem>
    <listitem><para>(-) usb-detach</para></listitem>
    <listitem><para>(-) usb-list</para></listitem>
    <listitem><para>(-) usb-list-assignable-devices</para></listitem>
    <listitem><para>(-) usb-hc-create</para></listitem>
    <listitem><para>(-) usb-hc-destroy</para></listitem>
    <listitem><para>(-) pci-list-assignable-devices</para></listitem>
    <listitem><para>(-) block-configure</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.net">
   <title>Network Management</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) network2-attach</para></listitem>
    <listitem><para>(-) network2-detach</para></listitem>
    <listitem><para>(-) network2-list</para></listitem>
    <listitem><para>(-) vtpm-list</para></listitem>
    <listitem><para>(-) vnet-list</para></listitem>
    <listitem><para>(-) vnet-create</para></listitem>
    <listitem><para>(-) vnet-delete</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.cpu">
   <title>CPU Management</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) cpupool-new</para></listitem>
    <listitem><para>(-) cpupool-start</para></listitem>
    <listitem><para>(-) cpupool-delete</para></listitem>
    <listitem><para>(-) tmem-destroy</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.policy">
   <title>Policy Management</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) setpolicy</para></listitem>
    <listitem><para>(-) dumppolicy</para></listitem>
    <listitem><para>(-) resetpolicy</para></listitem>
    <listitem><para>(-) getpolicy</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.label">
   <title>Label Management</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) labels</para></listitem>
    <listitem><para>(-) addlabel</para></listitem>
    <listitem><para>(-) rmlabel</para></listitem>
    <listitem><para>(-) getlabel</para></listitem>
   </itemizedlist>
  </sect3>
  <sect3 id="sec.xmvsxl.removed.others">
   <title>Others</title>
   <para></para>
   <itemizedlist>
    <listitem><para>(-) resources</para></listitem>
    <listitem><para>(-) shell</para></listitem>
    <listitem><para>(-) change-vnc-passwd</para></listitem>
   </itemizedlist>
  </sect3>
 </sect2>
 <sect2 id="sec.xmvsxl.changed">
  <title>Changed Options</title>
  <para>
    (*)create &lt;ConfigFile&gt; [options] [vars]
           -q, --quiet
           -p, --paused
           -c, --console_autoconnect
           -n, --dryrun
        (*)-f=FILE, --defconfig=FILE	//Use the given configuration file.
        (-)--help_config
        (-)--path
        (-)-F=FILE, --config=FILE	//Use the given SXP formatted configuration script.
        (-)-x, --xmldryrun		//XML dry run.
        (-)-s, --skipdtd		//Skip DTD checking - skips checks on XML before creating.
        (+)-V, --vncviewer
        (+)-A, --vncviewer-autopass
    (*)console [options] &lt;Domain&gt;
           -n NUM
        (+)-t [pv|serial]		//Connect to a PV console or connect to an emulated serial console.  
					//PV consoles are the only consoles available for PV domains while HVM domains can have both.
    (*)info
           -n, --numa
        (-)-c, --config	//List Xend configuration parameters
    (*)dump-core &lt;Domain&gt; &lt;filename&gt;
        (-)-L, --live			//Dump core without pausing the domain.
        (-)-C, --crash			//Crash domain after dumping core.
        (-)-R, --reset			//Reset domain after dumping core
    (*)list [options] [Domain]
           -l, --long
        (-)--label
        (-)--state=&lt;state&gt;
        (+)-Z, --context		//Also prints the security labels.
        (+)-v, --verbose		//Also prints the domain UUIDs, the shutdown reason and security labels.
    (*)mem-max domain-id mem		//appending 't' for terabytes, 'g' for gigabytes, 'm' for megabytes,'k' for kilobytes and 'b' for bytes.
    (*)mem-set domain-id mem
    (*)migrate [options] &lt;Domain&gt; &lt;host&gt;
        (-)-l, --live
        (-)-r, --resource Mbs		//Set maximum Mbs allowed for migrating the domain.
        (-)-c, --change_home_server
        (-)--max_iters=max_iters	//Number of iterations before final suspend (default:30).
        (-)--max_factor=max_factor	//Max amount of memory to transfer before final suspend(default: 3*RAM).
        (-)--min_remaining=min_remaining //Number of dirty pages before final suspend (default:50).
        (-)--abort_if_busy		//Abort migration instead of doing final suspend.
        (-)--log_progress		//Log progress of migration to xend.log
        (-)-s, --ssl
        (+)-s sshcommand		//Use &lt;sshcommand&gt; instead of ssh.
        (+)-e				//On the new host, do not wait in the background (on &lt;host&gt;) for the death of the domain.
        (+)-C config			//Send &lt;config&gt; instead of config file from creation.
    (*)reboot [options] &lt;Domain&gt;
        (-)-a, --all
        (-)-w, --wait
        (+)-F
    (*)save [options] &lt;Domain&gt; &lt;CheckpointFile&gt; [&lt;ConfigFile&gt;]
        (+)-c				//Leave domain running after creating the snapshot.
    (*)restore [options] [&lt;ConfigFile&gt;] &lt;CheckpointFile&gt;
           -p
        (+)-e				//Do not wait in the background for the death of the domain on the new host.
        (+)-d				//Enable debug messages.
        (+)-V, --vncviewer
        (+)-A, --vncviewer-autopass
    (*)shutdown [options] &lt;Domain&gt;
           -w, --wait
        (-)-a
        (-)-R
        (-)-H
        (+)-F
    (*)trigger &lt;Domain&gt; &lt;nmi|reset|init|power|sleep|s3resume&gt; [&lt;VCPU&gt;]	//Only available 
									//for HVM domains.
    (*)sched-credit [OPTIONS]
           -d DOMAIN, --domain=DOMAIN
           -w WEIGHT, --weight=WEIGHT
           -c CAP, --cap=CAP
        (+)-p CPUPOOL, --cpupool=CPUPOOL	//Restrict output to domains in the specified cpupool.
        (+)-s, --schedparam			//Specify to list or set pool-wide scheduler parameters.
        (+)-t TSLICE, --tslice_ms=TSLICE	//Timeslice tells the scheduler how long to allow VMs to run before pre-empting.
        (+)-r RLIMIT, --ratelimit_us=RLIMIT	//Ratelimit attempts to limit the number of schedules per second.
    (*)sched-credit2 [OPTIONS]
           -d DOMAIN, --domain=DOMAIN
           -w WEIGHT, --weight=WEIGHT
        (+)-p CPUPOOL, --cpupool=CPUPOOL
    (*)sched-sedf [OPTIONS]
           -p PERIOD, --period=PERIOD
           -s SLICE, --slice=SLICE
           -l LATENCY, --latency=LATENCY
           -e EXTRA, --extra=EXTRA
           -w WEIGHT, --weight=WEIGHT
        (+)-c CPUPOOL, --cpupool=CPUPOOL
        (+)-d DOMAIN, --domain=DOMAIN
    (*)cpupool-cpu-remove &lt;CPU Pool&gt; &lt;CPU nr&gt;|node:&lt;node nr&gt;
    (*)cpupool-list [-c|--cpus] [&lt;CPU Pool&gt;]
        (-)-l, --long
    (*)cpupool-cpu-add cpu-pool cpu-nr|node:node-nr
    (*)cpupool-create [OPTIONS] [ConfigFile] [Variable=Value ...]
           -f FILE, --defconfig=FILE
           -n, --dryrun
        (-)--help_config
        (-)--path=PATH
        (-)-F=FILE, --config=FILE
    (*)pci-detach [-f] &lt;domain-id&gt; &lt;BDF&gt;
        (+)-f	//If -f is specified, xl is going to forcefully remove the device even without guest's collaboration.
    (*)block-attach &lt;Domain&gt; &lt;disk-spec-component(s)&gt;
         	//example: xl block-attach sles11-pv format=raw, vdev=hdc, access=ro, devtype=cdrom, target=/share/isos/SLES-11-SP3-DVD-i586-GM-DVD1.iso
    (*)block-list domain-id
        (-)-l|--long
    (*)network-list &lt;Domain(s)&gt;
        (-)-l|--long
    (*)network-detach domain-id devid|mac	//Alternatively the mac address can be used to select the virtual interface to detach.
    (*)tmem-set domain-id [OPTIONS]
        (-)weight=&lt;weight&gt;
        (-)cap=&lt;cap&gt;
        (-)compress=&lt;compress&gt;
        (+)-w WEIGHT
        (+)-c CAP
        (+)-p COMPRESS
       </para>
      </sect2>
      <sect2 id="sec.xmvsxl.new">
       <title>New Options</title>
       <para>
    (+)migrate-receive
    (+)config-update &lt;Domain&gt; &lt;ConfigFile&gt; [options] [vars]	//Update a running domain's saved configuration, used when rebuilding the domain after reboot.
    (+)remus [options] &lt;Domain&gt; [&lt;host&gt;]			//Remus support in xl is still in experimental(proof-of-concept) phase.
    (+)sharing [Domain]		//List count of shared pages.List specifically for that domain. Otherwise, list for all domains.
    (+)vm-list
    (+)cpupool-rename cpu-pool &lt;newname&gt;
    (+)cpupool-numa-split	//Splits up the machine into one cpu-pool per numa node.
    (+)cd-insert &lt;Domain&gt; &lt;VirtualDevice&gt; &lt;type:path&gt;		//Only works with HVM domains.
    (+)cd-eject &lt;Domain&gt; &lt;VirtualDevice&gt;			//Only works with HVM domains.
    (+)pci-assignable-list
    (+)pci-assignable-add &lt;BDF&gt;
    (+)pci-assignable-remove [options] &lt;BDF&gt;
    (+)loadpolicy &lt;policy file&gt;
   </para>
  </sect2>
 </sect1>
