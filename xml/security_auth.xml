<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.security.auth">
 <title>Authentication Server</title>

 <abstract>
  <para>
   The Authentication Server is based on LDAP and optionally Kerberos.
   You can configure it with a &yast; wizard.
  </para>
  <para>
   For more information about LDAP, see <xref
   linkend="cha.security.ldap"/>, and about Kerberos, see <xref
   linkend="cha.security.kerberos"/>.
  </para>
 </abstract>
 <!-- ============================================================ -->
 <sect1 id="sec.security.auth.yast"><!-- os="sles">-->
 <title>Configuring an Authentication Server with &yast;</title>
  <para>
   To set up an authentication server for user account data, make sure
   the <systemitem>yast2-auth-server</systemitem>,
   <systemitem>openldap2</systemitem>,
   <systemitem>krb5-server</systemitem>, and
   <systemitem>krb5-client</systemitem> packages are installed; &yast;
   will remind you and install them if one of these packages is
   missing.  For Kerberos support, the
   <systemitem>krb5-plugin-kdb-ldap</systemitem> package is required.
  </para>
  <para>
   The first part of the Authentication Server configuration with &yast;
   is setting up an LDAP server, then Kerberos enablement follows:
  </para>
  <procedure>
   <title>Authentication Server Configuration with &yast;</title>
   <step>
    <para>
     Start &yast; as &rootuser; and select <menuchoice> <guimenu>Network
     Services</guimenu> <guimenu>Authentication Server</guimenu>
     </menuchoice> to invoke the configuration wizard.
    </para>
   </step>
   <step>
    <para>
     Configure the <guimenu>Global Settings</guimenu> of your LDAP server
     (you can change these settings later)&mdash;see
     <xref linkend="fig.auth.y2.wizard.general.settings"/>:
    </para>
    <figure id="fig.auth.y2.wizard.general.settings">
     <title>&yast; Authentication Server Configuration</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_auth_wizard_general_settings.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_auth_wizard_general_settings.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <substeps>
     <step>
      <para>
       Set LDAP to be started.
      </para>
     </step>
     <step>
      <para>
       If the LDAP server should announce its services via SLP, check
       <guimenu>Register at an SLP Daemon</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Configure <guimenu>Firewall Settings</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Next</guimenu>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
1     Select the server type: <guimenu>Stand-alone server</guimenu>,
     <guimenu>Master server in a replication setup</guimenu>, or
     <guimenu>Replica (slave) server</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Select security options (<guimenu>TLS Settings</guimenu>).
    </para>
    <para>
     It is strongly recommended to <guimenu>Enable TLS</guimenu>. For more
     information, see <xref linkend="step.ldap.server.config.tls"/>.
    </para>
    <warning>
     <title>Password Encryption</title>
     <para>
      Enabling TLS ensures passwords are sent encrypted over the network.
      When this option is not enabled, passwords are sent unencrypted.
     </para>
    </warning>
    <para>
     Also consider to use LDAP over SSL and certificates.
    </para>
    <!-- FIXME
    2014-07-30, ke: more on "Launch CA management..." button?
    -->
   </step>
   <step>
    <para>
     Confirm <guimenu>Basic Database Settings</guimenu> with entering an
     <guimenu>LDAP Administrator Password</guimenu> and then clicking
     <guimenu>Next</guimenu>&mdash;see
     <xref
      linkend="fig.auth.y2.wizard.db.settings"/>.
    </para>

    <figure id="fig.auth.y2.wizard.db.settings">
     <title>&yast; LDAP Server&mdash;New Database</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_auth_wizard_db_settings.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_auth_wizard_db_settings.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>

   </step>

   <step>
    <para>
     In the <guimenu>Kerberos Authentication</guimenu> dialog decide
     whether to enable Kerberos authentication or not (you can change
     these settings later)&mdash;see <xref
     linkend="fig.auth.y2.wizard.kerberos.yes"/>.
    </para>
    <figure id="fig.auth.y2.wizard.kerberos.yes">
     <title>&yast; Kerberos Authentication</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_auth_wizard_kerberos_yes.png" width="75%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_auth_wizard_kerberos_yes.png" width="75%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     Choose whether Kerberos support is needed or not.  If you enable
     it, also specify your <guimenu>Realm</guimenu>.  Then confirm with
     <guimenu>Next</guimenu>.
    </para>
    <substeps>
     <step>
      <para>
       The <guimenu>Advanced Configuration</guimenu> allows you to
       specify various aspects such as <guimenu>Maximum ticket life
       time</guimenu> or ports to use.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Finally, check the <guimenu>Authentication Server Configuration
     Summary</guimenu> and click <guimenu>Finish</guimenu> to exit the
     configuration wizard.
    </para>
   </step>
  </procedure>
 </sect1>
 <!-- ============================================================ -->
 <sect1 id="sec.security.auth.yast.edit"><!-- os="sles">-->
 <title>Editing an Authentication Server Configuration with &yast;</title>
  <para>
   For changes or additional configuration start the Authentication
   Server module again and in the left pane expand <guimenu>Global
   Settings</guimenu> to make subentries visible&mdash;see <xref
   linkend="fig.auth.y2.server.cfg"/>:
  </para>
  <figure id="fig.auth.y2.server.cfg">
   <title>&yast; Editing Authentication Server Configuration</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_auth_server_cfg.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_auth_server_cfg.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

 </sect1>

</chapter>
