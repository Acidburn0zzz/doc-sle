<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.vt.installation">
 <title>Insallation of Virtualization components</title>
 <para>None of the virtualization tools is installed by default.</para>
 <sect1 id="sec.vt.installation.kvm">
  <title>Installing &kvm;</title>
  <para>
   To install &kvm; and KVM tools, proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>KVM server</guimenu>, <guimenu>KVM tools</guimenu> and confirm with
     <guimenu>Accept</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm the list of packages that is to be installed with
     <guimenu>Install</guimenu>.
    </para>
   </step>
   <step>
    <para>
     About network bridge see <xref linkend="sec.vt.installation.network"/>
    </para>
   </step>
   <step>
    <para>
     After the setup has been finished, you can reboot the machine as &yast;
     suggests or alternatively load the required kernel modules manually and
     start &libvirtd; to avoid a reboot:
    </para>
<screen condition="kvm4x86">modprobe kvm-intel # on Intel machines only
modprobe kvm-amd   # on AMD machines only
modprobe vhost-net
systemctl start libvirtd.service</screen>
<screen condition="kvm4zSeries">modprobe kvm
systemctl start libvirtd.service</screen>
   </step>
  </procedure>

  <note condition="kvm4x86">
   <title>The <literal>vhost-net</literal> Kernel Module</title>
   <para>
    The vhost-net kernel module allows for a more efficient network
    transport to the guest. It is automatically used by
    <systemitem
     class="library">libvirt </systemitem> if loaded, or
    when using the <command>qemu-kvm</command> command line, by adding
    <option>,vhost=on</option> to the networking option.
   </para>
  </note>
 </sect1>

 <sect1 id="sec.vt.installation.xen">
  <title>Installing &xen;</title>
  <para>
   To install &xen; and &xen; tools, proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>&xen; server</guimenu>, <guimenu>&xen; tools</guimenu> and confirm with
     <guimenu>Accept</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm the list of packages that is to be installed with
     <guimenu>Install</guimenu>.
    </para>
   </step>
   <step>
    <para>
     If you want a network bridge see <xref linkend="sec.vt.installation.network"/>
    </para>
   </step>
   <step>
    <para>
     After the setup has been finished, you need to reboot the machine
     on a <emphasis>xen kernel</emphasis>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.vt.installation.containers">
  <title>Installing Containers</title>
  <para>
   To install containers proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>&libvirt; lxc daemon</guimenu> and confirm with
     <guimenu>Accept</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Confirm the list of packages that is to be installed with
     <guimenu>Install</guimenu>.
    </para>
   </step>
  </procedure>
 </sect1>
 
 <sect1 id="sec.vt.installation.patterns">
  <title>Patterns</title>
  <para>
   it is possible using zypper and patterns to install the needed packages.
   Available patterns are:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     patterns-sles-kvm_tools: all minimal system to get a running KVM
     Hypervisor and be able to configure, manage, and monitor virtual
     machines on a single physical machine
    </para>
   </listitem>
   <listitem>
    <para>
     patterns-sles-kvm_server: KVM Host Server minimal installation set
    </para>
   </listitem>
   <listitem>
    <para>
     patterns-sles-xen_tools: This will provide all minimal system to get a
     running XEN Hypervisor and be able to configure, manage, and monitor
     virtual machines on a single physical machine
    </para>
   </listitem>
   <listitem>
    <para>
     patterns-sles-xen_server: XEN Host Server minimal installation set
    </para>
   </listitem>
  </itemizedlist>
  <note>
   <para>Theres is no pattern for containers, just install the
  <emphasis>libvirt-daemon-lxc</emphasis> package.
  </para>
  </note>
  <para>Use &zypper; to install the pattern:</para>
  <screen>&rootuser; zypper in PATTERN_NAME</screen>
 </sect1>
 <sect1 id="sec.vt.installation.network">
  <title>Network Bridge</title>
  <para>
   While you are in the process of the installation, 
   if you want to setup a network bridge, you just need to be 
   <emphasis>Agree to set up a network bridge</emphasis> by clicking
   <guimenu>Yes</guimenu>. It is recommended using a bridge on a &vmhost; 
   (virtual machine host). If you prefer to manually configure a different
   network setup, you can safely skip this step by clicking <guimenu>No</guimenu>.
  </para>
 </sect1>
</chapter>
