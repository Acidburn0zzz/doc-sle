<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.xen.update">
 <title>Updating SLE 10 Systems to SLE 11</title>
 <para>
  The update of a &xen; &vmhost; is done similarly to the update of a normal
  &sle; system. Simply follow the update description of the new &sle;
  system.
 </para>
<!--
  <note>
   <para>
    In SLE 10, changing the configuration of a virtual machine by editing
    its configuration file
    (<filename>/etc/xen/vm/<replaceable>vm_name</replaceable></filename>) was
    acceptable. In SLE 10 SP1 and later, editing the configuration file is
    no longer recommended. Instead, virtual machine configuration changes
    should be made in Virtual Machine Manager and by editing virtual machine
    settings stored in the Xend database.
   </para>
  </note> -->
 <para>
  To update a SLE 10 SP1 or later virtual machine to SLE 11, complete the
  following procedure.
 </para>
 <procedure>
  <step>
   <para>
    Make sure the host computer is running the most recent SLE updates. The
    host computer must be running software that is more recent than the
    software planned for the virtual machine update.
   </para>
  </step>
  <step>
   <para>
    Shut down the virtual machine you want to update.
   </para>
  </step>
  <step>
   <para>
    Prepare the virtual machine’s operating system environment for the
    update by completing any prerequisite tasks. It is recommended to make a
    copy of the entire virtual disk.
   </para>
  </step>
  <step>
   <para>
    View or print the virtual machine’s configuration found with
    <command>xm list -l &lt;vm_name&gt;</command>.
   </para>
  </step>
  <step>
   <para>
    Use the Virtual Machine Manager to update the virtual machine.
   </para>
  </step>
  <step>
   <para>
    Choose the operating system that is currently used on the virtual
    machine.
   </para>
  </step>
  <step>
   <para>
    Select the virtual machine from the list to update.
   </para>
  </step>
  <step>
   <para>
    Specify the &sle; installation source as the <guimenu>Installation
    Source</guimenu> for the virtual machine.
   </para>
  </step>
  <step>
   <para>
    Run through the virtual machine update the same way, as if it would be a
    physical machine.
   </para>
  </step>
  <step>
   <para>
    Click <guimenu>OK</guimenu> to create the virtual machine and start the
    installation program.
   </para>
   <para>
    A new window displaying the installation program opens on the &dom0;.
   </para>
  </step>
  <step>
   <para>
    During the installation program, select <guimenu>Update</guimenu> from
    the <guimenu>Installation Mode</guimenu> screen.
   </para>
  </step>
<!--
   <step>
    <para>
     If you receive a message stating that an error occurred while
     installing &grub;, click <guimenu>OK</guimenu>.
    </para>
   </step>
   <step>
    <para>
     If you receive a message stating that an error occurred during boot
     loader installation, click <guimenu>No</guimenu>.
    </para>
   </step> -->
  <step>
   <para>
    Continue the installation/update by following the instructions on the
    screen.
   </para>
<!--
    <para>
     The installation program continues by booting the virtual machine and
     displaying the rest of the installation in text mode.
    </para> -->
   <para>
    After the installation program is completed, the virtual machine should
    run SLE 11 and be registered with Xend.
   </para>
  </step>
<!-- I am not sure if SP1 already does the autoconfiguration  -->
  <step>
   <para>
    Log in to the SLE 11 virtual machine.
   </para>
  </step>
  <step>
   <para>
    If you want the SLE 11 virtual machine to run in GUI mode, complete the
    following from its command line:
   </para>
   <substeps>
    <step>
     <para>
      Enter <command>init 3</command>.
     </para>
    </step>
    <step>
     <para>
      Enter <command>sax2</command> to configure the GUI environment.
     </para>
    </step>
    <step>
     <para>
      Enter <command>init 5</command> to restart the GUI.
     </para>
    </step>
   </substeps>
  </step>
 </procedure>
 <sect1>
  <title>Boot Loader Configuration</title>

  <para>
   After the upgrade of &dom0;, &xen; is no longer selected as the default
   boot option in the grub boot menu. To make it default, start &yast; and
   select <menuchoice><guimenu>System</guimenu> <guimenu>Boot
   Loader</guimenu> <guimenu>Boot Loader Options</guimenu></menuchoice>.
   Then select the <systemitem>XEN</systemitem> entry in <guimenu>Default
   Boot Section</guimenu>. Finish with <guimenu>OK</guimenu>.
  </para>
 </sect1>
</chapter>
