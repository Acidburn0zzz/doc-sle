<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="image_creator.xml" id="cha.imgcreator">
 <title>使用 YaST 映像创建程序创建映像</title>
 <abstract>
  <para>
   YaST 映像创建程序是 KIWI 映像工具的图形界面（有关 KIWI 的更多信息，请参见 <ulink url="http://doc.opensuse.org/projects/kiwi/doc/"/>）。使用映像创建程序，您可以创建新的 KIWI 配置，或者导入现有的配置并对其进行修改，然后在完成配置后构建映像。高级用户可将配置保存到磁盘，然后手动对其进行修改并构建映像。
  </para>

  <para>
   要使用该程序，您需要安装 SUSE 软件开发包中的 <systemitem class="resource">yast2-product-creator</systemitem> 包。该 SDK 是 SUSE Linux Enterprise 的附加产品，可从 <ulink url="http://download.suse.com/"/> 下载，搜索 <literal>SUSE Linux Enterprise 软件开发包</literal>即可找到。
  </para>
 </abstract>
 <sect1 id="sec.img.create">
  <title>创建映像</title>

  <para>
   要创建产品的映像，请执行以下操作：
  </para>

  <procedure>
   <step performance="required">
    <para>
     启动 YaST 并打开<guimenu>映像创建程序</guimenu>模块。
    </para>
   </step>
   <step performance="required">
    <para>
     窗口中显示了所有现有映像配置的列表。您可以对它们执行<guimenu>编辑</guimenu>或<guimenu>删除</guimenu>操作。选择<guimenu>添加</guimenu>可以创建新的映像。
    </para>
   </step>
   <step performance="required">
    <para>
     输入新 <guimenu>Kiwi 配置</guimenu>的名称，然后选择是要从头开始创建映像，还是在现有 KIWI 配置的基础上创建。如采用后一种方式，请提供现有 KIWI 配置的路径，以便映像创建程序能够导入它。
    </para>
   </step>
   <step performance="required">
    <para>
     选择需要构建的映像类型。这里提供了多个选项 - <guimenu>在线 ISO 映像</guimenu>、<guimenu>Xen 映像</guimenu>或<guimenu>虚拟磁盘映像</guimenu>。
    </para>
   </step>
   <step performance="required">
    <para>
     选择要将 KIWI 配置储存到的输出目录。
    </para>
   </step>
   <step performance="required">
    <para>
     如果在 64 位体系结构上运行映像创建程序，您可以强制 KIWI 针对 32 位体系结构配置映像，此外，还可以将该映像限制为 i586。
    </para>
   </step>
   <step performance="required">
    <para>
     添加 KIWI 配置需要使用的包储存库列表。单击<guimenu>添加</guimenu>以添加新的储存库，或者单击<guimenu>从系统添加</guimenu>以添加运行映像创建程序的系统中配置的储存库。如果需要修改现有储存库的细节，请选择它并单击<guimenu>编辑</guimenu>。要去除不需要的储存库，请选择它并单击<guimenu>删除</guimenu>。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
    <figure id="fig.imgcreator.repos">
     <title>在映像创建程序中编辑储存库</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step performance="required">
    <para>
     接下来的屏幕中有四个选项卡。您可以在此处设置 KIWI 支持的更多配置选项，以优化调整生成的映像。
    </para>
    <para>
     在<guimenu>映像配置</guimenu>选项卡中，您可以设置映像版本和大小，然后具体地修改映像的软件选择。可以指定三个包部分的模式/包：包含在映像中的包、包含在引导程序中的包，以及需要从映像中删除的包。
    </para>
    <figure id="fig.imgcreator.tabs">
     <title>映像创建程序中的详细 KIWI 配置</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     要更改需要安装（或者要忽略）的包和/或模式列表，请单击<guimenu>更改</guimenu>，此时将会打开 <guimenu>YaST 包选择器</guimenu>，您可以在其中做出选择。
    </para>
    <para>
     在<guimenu>描述</guimenu>选项卡中，填写有关映像的作者、描述和区域设置的信息。
    </para>
    <para>
     <guimenu>用户</guimenu>选项卡可让您添加应该在目标系统上使用的新用户。
    </para>
    <para>
     接下来，可以编辑用于构建映像的配置<guimenu>脚本</guimenu>。
    </para>
    <para>
     最后，在<guimenu>目录</guimenu>选项卡中配置包含系统配置和脚本的目录。
    </para>
   </step>
   <step performance="required">
    <para>
     在配置完映像后，单击<guimenu>完成</guimenu>以构建该映像。YaST 将要求您确认所做的选择。如果您拒绝，相应的配置将会保存下来，而您将会返回概览屏幕。如果您确认构建，KIWI 即会启动，同时您会看到一个显示 KIWI 日志文件的进度窗口。
    </para>
    <para>
     如果映像构建成功，它将会保存到前面指定的输出目录。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
