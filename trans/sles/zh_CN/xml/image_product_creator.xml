<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="image_product_creator.xml" id="cha.productcreator">
 <title>使用 YaST 产品创建程序创建映像</title>
 <abstract>
  <para>
   YaST 产品创建程序是一个图形工具，用于创建可安装的映像。要使用该程序，您需要安装 SUSE 软件开发包中的 <systemitem class="resource">yast2-product-creator</systemitem> 包。该 SDK 是 SUSE Linux Enterprise 的附加产品，可从 <ulink url="http://download.suse.com/"/> 下载，搜索 <literal>SUSE Linux Enterprise 软件开发包</literal>即可找到。
  </para>
 </abstract>
 <sect1 id="sec.pc.create">
  <title>创建映像</title>

  <para>
   要创建产品的映像，请执行以下操作：
  </para>

  <procedure>
   <step performance="required">
    <para>
     启动 YaST，然后打开<guimenu>产品创建程序</guimenu>模块。
    </para>
   </step>
   <step performance="required">
    <para>
     如果您是第一次启动产品创建程序，请输入配置名称并选择将包添加到 ISO 映像的方法。
    </para>
    <para>
     如果您之前曾创建过产品，窗口会显示所有现有产品的列表。您可以对它们执行<guimenu>编辑</guimenu>或<guimenu>删除</guimenu>操作。选择<guimenu>添加</guimenu>可以创建新的产品。
    </para>
   </step>
   <step performance="required">
    <para>
     选择或取消选择要在产品中使用的包源，方法是选择一个项，然后相应地选择<guimenu>选择</guimenu>或<guimenu>去除</guimenu>。
    </para>
    <para>
     选择<guimenu>新建</guimenu>启动 YaST 附加产品创建程序，以便设置新的软件源。随后启动 YaST 的<guimenu>安装源</guimenu>模块，并添加您创建的源。重启动产品创建程序，使该源可供选择。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
    <note>
     <title>不支持的目标体系结构</title>
     <para>
      不要更改目标体系结构。从 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 12 开始，产品创建程序不支持构建不同的体系结构。
     </para>
    </note>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     从您在上一步选择的储存库列表中选择基础源。要使生成的 iso 映像可引导，它必须包含一个 <filename>/boot</filename> 目录，其中含有系统引导所需的文件。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     在<guimenu>产品创建程序配置</guimenu>屏幕上，输入要在其中创建主干目录的路径。选择是生成 ISO 文件还是目录树。
    </para>
    <para>
     激活<guimenu>仅复制所需文件</guimenu>以节省空间。（选择性）指定 <guimenu>CD 发行人</guimenu>和 <guimenu>CD 制作人</guimenu>以输入产品出处。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     编辑 <filename>isolinux.cfg</filename> 文件的内容（如果配置中需要）。在多数情况下，均可以保持不变。如果配置中不需要该文件，现在请使用<guimenu>装载文件</guimenu>添加它。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     选择要包含在产品中的软件包。您可以使用默认视图选择模式。选择<guimenu>细节</guimenu>可以选择单个的包。每当您选择新的包时，解析程序就会尝试自动解析所有包依赖性。如果自动解析失败，您需要手动解决冲突。如果无法解决冲突，则表示可能缺少提供所需包的来源。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     使用<guimenu>在媒体上对产品进行数字签名</guimenu>对产品签名。为产品配置提供密钥。使用 GPG 密钥签署产品可提供产品原创的证据。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step performance="required">
    <para>
     在配置摘要中检查设置，然后按<guimenu>完成</guimenu>继续。选择<guimenu>上一步</guimenu>按钮可以更改设置。
    </para>
   </step>
  </procedure>

  <para>
   产品定义现在已完成。产品创建程序可让您选择执行以下操作：
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <formalpara>
     <title><guimenu>创建产品</guimenu></title>
     <para>
      创建选定产品的 ISO 映像。如果缺少任何内容，该进程将中止。更正错误并重新配置。
     </para>
    </formalpara>
   </listitem>
   <listitem>
    <formalpara>
     <title><guimenu>用 KIWI 创建映像</guimenu></title>
     <para>
      使用下拉菜单从不同目标格式中选择，如 Live 媒体或 Xen 映像。
     </para>
    </formalpara>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
