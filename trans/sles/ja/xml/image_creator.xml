<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="image_creator.xml" id="cha.imgcreator">
 <title>YaST Image Creatorでのイメージの作成</title>
 <abstract>
  <para>
   YaST Image Creatorは、KIWIイメージングツールのグラフィカルインタフェースです(KIWIの詳細については<ulink url="http://doc.opensuse.org/projects/kiwi/doc/"/>を参照してください)。Image Creatorでは、KIWI設定を新規作成するか、既存のKIWI設定をインポートして変更することで設定を完了したうえで、イメージを作成できます。上級ユーザは、設定をディスクに保存し、それを変更して手動でイメージを作成できます。
  </para>

  <para>
   イメージを使用できるようにするには、SUSEソフトウェア開発キット(SDK)に付属のパッケージ<systemitem class="resource">yast2-product-creator</systemitem>をインストールする必要があります。このSDKは、SUSE Linux Enterprise向けのアドオン製品であり、<ulink url="http://download.suse.com/"/>からダウンロードできます。「<literal>SUSE Linux Enterpriseソフトウェア開発キット</literal>」で検索してください。
  </para>
 </abstract>
 <sect1 id="sec.img.create">
  <title>イメージの作成</title>

  <para>
   製品のイメージを作成するには、次の手順に従います。
  </para>

  <procedure>
   <step performance="required">
    <para>
     YaSTを起動して<guimenu>Image Creator</guimenu>モジュールを開きます。
    </para>
   </step>
   <step performance="required">
    <para>
     既存のすべてのイメージ設定が表示されます。これらを<guimenu>編集</guimenu>または<guimenu>削除</guimenu>できます。新規作成するには<guimenu>追加</guimenu>をクリックします。
    </para>
   </step>
   <step performance="required">
    <para>
     <guimenu>Kiwi Configuration (KIWI設定)</guimenu>に新しいKIWI設定の名前を入力し、まったくの新規状態で作成するか、既存のKIWI設定を基に作成するかを選択します。既存のKIWI設定を基に作成する場合は、その設定へのパスを指定し、Image Creatorでインポートできるようにします。
    </para>
   </step>
   <step performance="required">
    <para>
     作成するイメージの種類を作成します。この種類として、<guimenu>Live ISO Image (ライブISOイメージ)</guimenu>、<guimenu>Xen Image (Xenイメージ)</guimenu>、<guimenu>Virtual Disk Image (仮想ディスクイメージ)</guimenu>のオプションが用意されています。
    </para>
   </step>
   <step performance="required">
    <para>
     KIWI設定の格納先とする出力ディレクトリを選択します。
    </para>
   </step>
   <step performance="required">
    <para>
     64ビットアーキテクチャ上でImage Creatorを実行している場合は、KIWIで設定するイメージを強制的に32ビットアーキテクチャ向けとすることができるほか、イメージをi586専用に制限することもできます。
    </para>
   </step>
   <step performance="required">
    <para>
     KIWI設定で使用するパッケージリポジトリのリストを追加します。リポジトリを新たに追加するには<guimenu>追加</guimenu>をクリックします。Image Creatorを実行しているシステムで設定したリポジトリを追加するには<guimenu>Add from System (システムから追加)</guimenu>をクリックします。既存のリポジトリの詳細を変更する場合は、そのリポジトリを選択して<guimenu>編集</guimenu>をクリックします。不要なリポジトリを削除するには、そのリポジトリを選択して<guimenu>削除</guimenu>をクリックします。
    </para>
    <para>
     <guimenu>次へ</guimenu>で続行します。
    </para>
    <figure id="fig.imgcreator.repos">
     <title>Image Creatorでのリポジトリの編集</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step performance="required">
    <para>
     次の画面には4つのタブがあります。ここでは、KIWIが対応している他の設定オプションを使用して、ここまでで得られたイメージの細部を調整できます。
    </para>
    <para>
     <guimenu>Image Configuration (イメージ設定)</guimenu>タブでは、イメージのバージョンとサイズを設定でき、さらにイメージのソフトウェア選択を詳しく変更できます。イメージ上に含まれているパッケージ、ブートストラップに含まれているパッケージ、およびイメージから削除するパッケージの3つのセクションでパターンやパッケージを指定できます。
    </para>
    <figure id="fig.imgcreator.tabs">
     <title>Image CreatorでのKIWI詳細設定</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     インストールする(またはインストールで無視する)パッケージまたはパターンのリストを変更するには、<guimenu>Change (変更)</guimenu>をクリックして<guimenu>YaST Package Selector (YaSTパッケージの選択)</guimenu>を開くと、そこで選択内容を指定できます。
    </para>
    <para>
     <guimenu>説明</guimenu>タブで、イメージの作成者、説明、およびロケールの設定に関する情報を入力します。
    </para>
    <para>
     <guimenu>Users (ユーザ)</guimenu>タブでは、ターゲットシステム上で必要な新規ユーザを追加できます。
    </para>
    <para>
     次に、イメージの作成で使用する設定<guimenu>スクリプト</guimenu>を編集できます。
    </para>
    <para>
     最後に、システム設定とスクリプトを収めるディレクトリを<guimenu>ディレクトリ</guimenu>タブで設定します。
    </para>
   </step>
   <step performance="required">
    <para>
     イメージの設定を終了した後、<guimenu>完了</guimenu>をクリックして目的のイメージを作成します。選択内容の確認を求めるメッセージが表示されます。確認を拒否すると、設定は保存されますが、画面は概要の画面まで戻ります。作成の続行を確認するとKIWIが起動し、進行状況を示すウィンドウが開いて、KIWIのログファイルが表示されます。
    </para>
    <para>
     イメージが問題なく作成されると、これまでの手順で指定した出力ディレクトリにイメージが保存されます。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
