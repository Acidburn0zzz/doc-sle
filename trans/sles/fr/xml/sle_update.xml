<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="sle_update.xml" id="cha.update.sle">
 <title>Mise à jour de SUSE Linux Enterprise</title>
 <abstract>
  <para>
   SUSE® Linux Enterprise (SLE) permet de mettre à jour un système existant vers la nouvelle version, de SLE 11 SP3 vers SLE 12, par exemple. Aucune installation nouvelle n'est requise. Les données existantes, telles que les répertoires privés et de données, ainsi que la configuration du système, sont conservées. Vous pouvez effectuer la mise à jour à partir d'un lecteur de CD ou de DVD local ou à partir d'une source d'installation réseau centrale.
  </para>

  <para>
   Si vous êtes habitué aux mises à jour, mises à niveau et Service Packs de SUSE Linux Enterprise, vous pouvez consulter la section de terminologie pour connaître les nouveautés, puis passer directement à la section de présentation de la mise à jour. Ce chapitre présente les options de mise à jour disponibles et vous guide tout au long du processus de planification de la mise à jour globale, ainsi que les sections suivantes : instructions de mise à jour détaillées vers la version actuelle, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productname"><phrase os="sles;sled;slerte">12</phrase></phrase>.
  </para>

  <para>
   Le reste du chapitre propose des informations générales sur les cycles de vie des produits SUSE et les versions des Service Packs, ainsi que les stratégies recommandées en matière de mise à niveau. Il vous explique également en quoi le logiciel SUSE Linux Enterprise est à jour malgré des numéros de version obsolètes (« rétroports ») et présente d'autres documents référencés par les instructions de mise à jour détaillées.
  </para>

 </abstract>
 <sect1 id="sec.update.terminology">
  <title>Informations générales : terminologie</title>

  <para>
   Différents termes sont employés dans ce chapitre. Afin de bien comprendre les informations, lisez les définitions ci-après :
  </para>

  <variablelist>
   <varlistentry>
    <term>Rétroportage</term>
    <listitem>
     <para>
      Le rétroportage consiste à adapter une modification développée pour une nouvelle version d'un logiciel afin d'en faire bénéficier une version plus ancienne. Le cas le plus courant porte sur la correction des failles de sécurité dans les composants logiciels plus anciens. En règle générale, le rétroportage fait également partie d'un modèle de maintenance visant à fournir des améliorations ou (plus rarement) de nouvelles fonctionnalités.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>deltarpm</term>
    <listitem>
     <para>
      Un deltarpm se compose uniquement des différentiels binaires compris entre deux versions définies d'un paquetage. Il a donc la taille de téléchargement la plus petite. Avant son installation, l'intégralité du paquetage RPM est reconstruit sur la machine locale.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Downstream (En aval)</term>
    <listitem>
     <para>
      Ce terme est une métaphore utilisée pour qualifier le développement de logiciels dans le monde Open Source (à comparer à <emphasis>Upstream</emphasis> (En amont). Le terme <emphasis>Downstream</emphasis> désigne des personnes ou des entreprises, telles que SUSE, qui intègrent le code source (en amont) dans d'autres logiciels afin de créer une distribution qui sera ensuite utilisée par des utilisateurs finaux. Le flux logiciel s'écoule donc des développeurs vers les utilisateurs finaux en passant pas les intégrateurs.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Extensions</term>
    <term>Produits complémentaires</term>
    <listitem>
     <para>
      
      Les extensions (connues également sous le nom de produits complémentaires) fournissent des fonctionnalités supplémentaires à <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Elles sont fournies par SUSE et ses partenaires, et sont enregistrées et installées au-dessus du produit de base <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Modules</term>
    <listitem>
     
     
       <para>
        Les modules sont des composants de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> bénéficiant d'une prise en charge complète, avec un cycle de vie différent. Ils présentent une étendue clairement définie et sont distribués uniquement via un canal en ligne. L'enregistrement sur le SUSE Customer Center constitue une condition préalable pour pouvoir s'abonner à ces canaux.
      </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Migration en ligne</term>
    <listitem>
     <para>
      Méthode qui consiste à mettre à jour un Service Pack (SP) en utilisant les outils de mise à jour en ligne (plutôt que le support d'installation) afin d'installer les correctifs correspondants. Cette migration met à jour tous les paquetages du système installé vers la version la plus récente, y compris les mises à jour, de SP3, plus celles de SP2.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>Paquetage</term>
    <listitem>
     <para>
      Un paquetage est un fichier compressé au format <literal>rpm</literal> qui contient tous les fichiers d'un programme donné, y compris les composants en option tels que la configuration, des exemples et la documentation.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term>Correctif</term>
    <listitem>
     <para>
      Un correctif comporte un ou plusieurs paquetages et peut être appliqué via des deltarpm. Il peut également introduire des dépendances dans les paquetages qui ne sont pas encore installés.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Version majeure</term>
    <term>Version de disponibilité générale (GA)</term>
    <listitem>
     <para>
      La version majeure de SUSE Linux Enterprise (ou de tout produit logiciel) est une version qui offre de nouveaux outils et fonctionnalités, met hors service des composants obsolètes et s'accompagne de modifications non rétrocompatibles.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Service packs (SP)</term>
    <listitem>
     <para>
      Combine plusieurs correctifs sous une forme facile à installer ou à déployer. Les service packs sont numérotés et contiennent généralement des correctifs de sécurité, des mises à jour, des mises à niveau ou des améliorations de programmes.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Upstream (En amont)</term>
    <listitem>
     <para>
      Ce terme est une métaphore utilisée pour qualifier le développement de logiciels dans le monde Open Source (à comparer à <emphasis>Downstream</emphasis>). Le terme <emphasis>upstream</emphasis> désigne le projet d'origine, auteur ou mainteneur d'un logiciel distribué comme code source. Les commentaires, correctifs, améliorations de fonctionnalités ou autres optimisations en provenance des utilisateurs finaux ou des contributeurs parviennent aux développeurs en amont. C'est à eux que revient la décision d'intégrer ou de rejeter la requête.
     </para>
     <para>
      Si les membres du projet décident d'intégrer la requête, elle s'affiche dans les versions plus récentes du logiciel. Une requête acceptée profite à toutes les parties concernées.
     </para>
     <para>
      Le rejet d'une requête peut être motivé par plusieurs raisons. Elle n'est pas conforme aux directives du projet, elle n'est pas valide, elle a déjà été intégrée, elle ne cadre pas avec l'esprit du projet ou elle ne figure pas sur la feuille de route. Une requête rejetée rend plus difficile la tâche des développeurs en amont, dans la mesure où ils doivent synchroniser leurs correctifs avec le code en amont. On évite généralement de recourir à cette méthode. Cependant, elle s'avère parfois nécessaire.
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term>Mise à jour</term>
    <listitem>
     <para>
      Installation d'une version plus récente <emphasis>(mineure)</emphasis> d'un paquetage.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mise à niveau</term>
    <listitem>
     <para>
      Installation d'une version plus récente <emphasis>(majeure)</emphasis> d'un paquetage ou d'une distribution qui offre de <emphasis>nouvelles fonctionnalités</emphasis>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>


 <sect1 id="sec.update.proc.prep.paths">
  <title>Voies de mise à niveau vers SLE prises en charge</title>

  <abstract>
   <para>
    SUSE Linux Enterprise prend en charge les mises à niveau directes d'une version vers la suivante. Par exemple, si vous exécutez actuellement SUSE Linux Enterprise 11 SP2, la mise à niveau s'effectuera en deux étapes : vers SUSE Linux Enterprise 11 SP3 dans un premier temps, puis vers SUSE Linux Enterprise 12.
   </para>

   <para>
    Il n'est pas possible d'ignorer une version intermédiaire lors de la mise à jour. C'est pourquoi, lorsque vous exécutez des versions beaucoup plus anciennes, telles que SUSE Linux Enterprise 10 ou SUSE Linux Enterprise 11 SP1, SUSE conseille d'effectuer une nouvelle installation plutôt qu'une longue série de mises à niveau.
   </para>

  </abstract>
  <important>
   <title>les mises à niveau entre architectures ne sont pas prises en charge</title>
   <para>
    Les mises à niveau entre architectures, comme une mise à niveau depuis une version 32 bits de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> vers la version 64 bits, ou d'un format Big Endian vers un mode Little Endian, ne sont <emphasis>pas</emphasis> prises en charge !
   </para>
   <para>
    En particulier, la mise à niveau de SLE 11 SP3 sur POWER (Big Endian) vers SLE 12 sur POWER (nouveauté : Little Endian) n'est <emphasis>pas</emphasis> prise en charge.
   </para>
   <para>
    De plus, puisque SUSE Linux Enterprise 12 est une version exclusivement 64 bits, les mises à niveau depuis un système SUSE Linux Enterprise 11 32 bits vers SUSE Linux Enterprise 12 ne sont <emphasis>pas</emphasis> prises en charge.
   </para>
  </important>

  <variablelist>
   <varlistentry>
    <term>Mise à niveau depuis SUSE Linux Enterprise 10 (tout Service Pack)</term>
    <listitem>
     <para>
      Aucune voie de migration directe vers SUSE Linux Enterprise 12 n'est prise en charge. Il est alors conseillé de procéder à une nouvelle installation.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mise à niveau depuis SUSE Linux Enterprise 11 GA ou SUSE Linux Enterprise 11 SP1</term>
    <listitem>
     <para>
      Aucune voie de migration directe vers SUSE Linux Enterprise 12 n'est prise en charge. 
     </para>
     <para>
      Si une nouvelle installation s'avère impossible, vous devez effectuer une mise à jour depuis SUSE Linux Enterprise 11 GA vers SP1, puis de SUSE Linux Enterprise 11 SP1 vers SP2, avant de continuer. Ces premières étapes sont décrites en ligne dans le manuel <ulink url="https://www.suse.com/documentation/sles11/">SUSE Linux Enterprise 11 Deployment Guide</ulink> (Guide de déploiement de SUSE Linux Enterprise 11).
     </para>
     <para>
      Passez ensuite à l'étape suivante :
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mise à niveau depuis SUSE Linux Enterprise 11 SP2</term>
    <listitem>
     <para>
      Commencez par mettre à niveau le système vers SUSE Linux Enterprise 11 SP3. Reportez-vous à la <xref linkend="sec.update.sle11sp2"/> pour obtenir des informations détaillées.
     </para>
     <para>
      Passez ensuite à l'étape suivante :
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mise à niveau de SUSE Linux Enterprise 11 SP3 vers SUSE Linux Enterprise 12</term>
    <listitem>
     <para>
      Reportez-vous à la <xref linkend="sec.update.sle12"/> pour obtenir des informations détaillées.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.update.prep">
  <title>Opérations préalables à la mise à jour</title>

  <para>
   Avant de lancer la procédure de mise à jour, assurez-vous que votre système est prêt. Cette préparation implique notamment la sauvegarde des données et la consultation des notes de version.
  </para>

  <sect2 id="sec.update.prep.relnotes">
   <title>Vérification des notes de version</title>
   <para>
    Les notes de version contiennent des informations supplémentaires sur les modifications apportées depuis la version précédente de SUSE Linux Enterprise. Vérifiez l'existence d'éléments à prendre en considération concernant le matériel ou la configuration, déterminez quels sont vos paquetages logiciels favoris qui ont fait l'objet de modifications importantes et identifiez les précautions à prendre en plus des recommandations générales de cette section. Les notes de version contiennent également des problèmes connus et des informations de dernière minute qui n'ont pas pu être intégrés dans le manuel.
   </para>
   <para>
    La version actuelle des notes de version contenant les informations les plus récentes sur <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> peut être consultée en ligne, à l'adresse suivante : <ulink url="http://www.suse.com/doc/sles12/#start"/>
   </para>
  </sect2>

  <sect2 id="sec.update.prep.backup">
   <title>Exécution d'une sauvegarde</title>
   <para>
    Avant de procéder à la mise à jour, copiez les fichiers de configuration existants sur un support distinct (comme un périphérique à bande, un disque dur amovible, etc.) pour sauvegarder les données. Cela concerne principalement les fichiers stockés dans <filename>/etc</filename>, ainsi que certains des répertoires et des fichiers de <filename>/var</filename> et de <filename>/opt</filename>. Vous pouvez également écrire les données de l'utilisateur de <filename>/home</filename> (les répertoires <envar>HOME</envar>) dans un support de sauvegarde. Sauvegardez ces données en tant que <systemitem class="username">root</systemitem>. Seul l'utilisateur <systemitem class="username">root</systemitem> a des droits de lecture sur tous les fichiers locaux.
   </para>
   <para>
    Si vous avez sélectionné <guimenu>Mettre à jour un système existant</guimenu> comme mode d'installation dans YaST, vous pouvez choisir d'effectuer une sauvegarde (système) ultérieurement. Vous pouvez inclure tous les fichiers modifiés, ainsi que ceux issus du répertoire <filename>/etc/sysconfig</filename>. Il ne s'agit toutefois pas d'une sauvegarde complète, dans la mesure où il manque tous les autres répertoires importants mentionnés ci-dessus. Recherchez la sauvegarde dans le répertoire <filename>/var/adm/backup</filename>.
   </para>
  </sect2>

  <sect2 id="sec.update.prep.disks">
   <title>Partitionnement et espace disque</title>
   <para>
    Avant de commencer votre mise à jour, prenez note de la partition root. La commande <command>df /</command> énumère le nom de périphérique de la partition root. Dans l'<xref linkend="aus.update.df"/>, la partition root à écrire est <filename>/dev/sda3</filename> (montée en tant que <filename>/</filename>).
   </para>
   <example id="aus.update.df">
    <title>List with <command>df -h</command></title>

<screen os="sles">Filesystem     Size  Used Avail Use% Mounted on
/dev/sda3       74G   22G   53G  29% /
tmpfs          506M     0  506M   0% /dev/shm
/dev/sda5      116G  5.8G  111G   5% /home
/dev/sda1       44G    4G   40G   9% /data</screen>
   </example>
   <para>
    La taille des logiciels tend à <quote>augmenter</quote> de versions en versions. Il convient donc de vérifier l'espace de partition disponible avec <command>df</command> avant d'effectuer la mise à jour. Si vous estimez que vous allez manquer d'espace disque, sécurisez vos données avant d'effectuer la mise à jour, puis repartitionnez votre système. Il n'existe pas de règle précise concernant l'espace de chaque partition. L'espace requis dépend de votre profil particulier de partitionnement et du logiciel sélectionné.
   </para>
  </sect2>

  <sect2 id="sec.update.prep.vms">
   <title>Arrêt des invités de machine virtuelle</title>
   <para>
    Si votre machine fait office de serveur hôte de machine virtuelle pour KVM ou Xen, veillez à arrêter correctement tous les invités de machine virtuelle actifs avant de procéder à la mise à jour. Dans le cas contraire, l'accès aux invités peut s'avérer impossible après la mise à jour.
   </para>
  </sect2>

 </sect1>
 <sect1 id="sec.update.sle11sp2">
  <title>Étape intermédiaire : mise à jour de SLE 11 SP2 vers SLE 11 SP3</title>
  <para>
   La migration en ligne est prise en charge par les outils suivants :
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <guimenu>YaST wagon</guimenu> (interface utilisateur graphique)
    </para>
   </listitem>
   <listitem>
    <para>
     <command>zypper</command> (ligne de commande)
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Si vous procédez à la mise à jour de votre système au moyen d'une migration en ligne, elle a lieu alors que le système est en cours d'exécution. Il vous suffit d'effectuer un seul redémarrage, une fois la mise à jour terminée. Les options suivantes vous sont également proposées dans le cadre de la mise à jour :
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <xref linkend="sec.update.sle11spx.medium"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="sec.update.sle11spx.smt"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <xref linkend="sec.update.sle11spx.manager"/>
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec.update.sle11sp3.online.requirements">
   <title>Configuration requise</title>
   <para>
    Pour pouvoir effectuer une mise à jour en ligne, les conditions suivantes doivent être réunies. Veuillez également lire la <xref linkend="sec.update.prep"/>.
   </para>
   <variablelist>
    <varlistentry>
     <term>Enregistrement du produit</term>
     <listitem>
      <para>
       Pour qu'il soit possible de se connecter aux dépôts de mise à jour, votre produit doit être enregistré. S'il ne l'est pas, vous pouvez exécuter le module <guimenu>Configuration de SUSE Customer Center</guimenu> dans YaST ou l'outil de ligne de commande <command>suse_register</command> pour lancer l'enregistrement.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Exécution d'une mise à jour en ligne</term>
     <listitem>
      <para>
       Assurez-vous que les correctifs les plus récents sont installés sur la version actuelle. Effectuez une mise à jour en ligne avant de procéder à une migration en ligne. Si vous utilisez une interface graphique, démarrez le module Mise à jour en ligne de YaST ou l'applet de mise à jour. Exécutez les commandes suivantes sur la ligne de commande (la dernière commande doit être exécutée à deux reprises) :
      </para>
<screen>zypper ref -s
zypper update -t patch
zypper update -t patch</screen>
      <para>
       Redémarrez le système si nécessaire.
      </para>
      <para>
       Reportez-vous au <xref linkend="cha.onlineupdate.you"/> ou à la <xref linkend="sec.zypper.softup"/> pour plus d'informations sur les outils de mise à jour en ligne.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Logiciels tiers</term>
     <listitem>
      <para>
       Si votre configuration implique un logiciel tiers ou supplémentaire, testez cette procédure sur une autre machine pour vous assurer que les dépendances ne sont pas brisées par la mise à jour.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <important>
    <title>exécutez toujours une migration en ligne complète.</title>
    <para>
     La migration en ligne doit toujours être effectuée du début à la fin. L'interruption de la procédure entraînera une corruption irrécupérable du système.
    </para>
   </important>
  </sect2>

  <sect2 id="sec.update.sle11sp3.online.wagon">
   <title>Migration en ligne avec YaST <guimenu>Wagon</guimenu></title>
   <procedure>
    <step performance="required">
     <para>
      Lorsque toutes les conditions requises sont réunies (voir la <xref linkend="sec.update.sle11spx.online.requirements"/>), l'applet de mise à jour affiche un message dans la barre système qui indique la disponibilité d'une mise à niveau de distribution. Cliquez sur celui-ci pour démarrer YaST <guimenu>Wagon</guimenu>. Une autre solution consiste à exécuter <command>/usr/sbin/wagon</command> en tant qu'utilisateur <systemitem class="username">root</systemitem> à partir de la ligne de commande.
     </para>
    </step>
    <step performance="required">
     <para>
      Confirmez la boîte de dialogue <guimenu>Bienvenue</guimenu> en cliquant sur <guimenu>Suivant</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      Si <guimenu>Wagon</guimenu> détermine que des conditions requises ne sont pas réunies (des mises à jour de maintenance requises sont disponibles, mais n'ont pas encore été installées), il procède à une mise à jour automatique, ce qui peut nécessiter un redémarrage. Suivez les instructions à l'écran.
     </para>
    </step>
    <step performance="required">
     <para>
      Choisissez la méthode de mise à jour dans la boîte de dialogue suivante. Sélectionnez <guimenu>Novell Customer Center</guimenu> pour utiliser la configuration par défaut (recommandé).
     </para>
     <para>
      Cliquez sur <guimenu>URL personnalisée</guimenu> pour choisir manuellement les dépôts logiciels utilisés pour la migration en ligne. La liste des dépôts est affichée. Vous avez alors la possibilité d'activer, de désactiver, d'ajouter ou de supprimer manuellement des dépôts. Ajoutez la ou les sources de mise à jour SP3. Il peut s'agir du support d'installation SP3 ou des dépôts <literal>SP3-Pool</literal> et <literal>SP3-Updates</literal>. Cliquez sur <guimenu>OK</guimenu> pour revenir à la boîte de dialogue <guimenu>Méthode de mise à jour</guimenu>.
     </para>
     <para>
      Si vous souhaitez passer en revue les modifications apportées à la configuration des dépôts par la procédure de mise à jour, sélectionnez <guimenu>Vérifier les modifications de dépôts automatiques</guimenu>.
     </para>
     <para>
      Cliquez ensuite sur <guimenu>Suivant</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      Le système va être réenregistré. Au cours de cette procédure, les dépôts <literal>SP3-Pool</literal> et <literal>SP3-Updates</literal> seront ajoutés au système (pour plus d'informations, reportez-vous à la <xref linkend="sec.update.nmm.repositories"/>). Confirmez l'ajout des dépôts.
     </para>
    </step>
    <step performance="required">
     <para>
      Si vous avez sélectionné l'option <guimenu>Vérifier les modifications de dépôts automatiques</guimenu> dans la boîte de dialogue <guimenu>Méthode de mise à jour</guimenu>, la liste des dépôts s'affiche. Elle vous offre la possibilité d'activer, de désactiver, d'ajouter ou de supprimer manuellement des dépôts. Dès que vous avez terminé, appuyez sur <guimenu>OK</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      L'écran <guimenu>Paramètres de mise à niveau de la distribution</guimenu> s'affiche. Il présente un résumé de la configuration de mise à jour. Les sections suivantes sont disponibles :
     </para>
     <variablelist>
      <varlistentry>
       <term><guimenu>Produits complémentaires</guimenu>
       </term>
       <listitem>
        <para>
         Vous pouvez ajouter des produits complémentaires SUSE Linux Enterprise Server ou des produits tiers à cet emplacement.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Options de mise à jour</guimenu>
       </term>
       <listitem>
        <para>
         Cette section affiche la liste des actions qui seront effectuées au cours de la mise à jour. Vous pouvez soit télécharger tous les paquetages avant de les installer (option par défaut recommandée), soit les télécharger et les installer un par un.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Paquetages</guimenu>
       </term>
       <listitem>
        <para>
         Aperçu statistique de la mise à jour.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Sauvegarde</term>
       <listitem>
        <para>
         Vous pouvez définir les options de sauvegarde.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <para>
      Cliquez sur <guimenu>Suivant</guimenu> et <guimenu>Démarrer la mise à jour</guimenu> pour continuer.
     </para>
     <important>
      <title>interruption de la migration en ligne</title>
      <para>
       Vous pouvez interrompre la procédure de migration en ligne en toute sécurité sur cet écran <emphasis>avant</emphasis> de cliquer sur <guimenu>Démarrer la mise à jour</guimenu>, ainsi que sur tous les écrans précédents. Cliquez sur <guimenu>Interrompre</guimenu> pour abandonner la procédure de mise à jour et rétablir le système dans l'état dans lequel il se trouvait avant le démarrage de YaST Wagon. Suivez les instructions à l'écran et effectuez un réenregistrement avant de quitter Wagon, afin de supprimer les dépôts SP2 de votre système.
      </para>
     </important>
    </step>
    <step performance="required">
     <para>
      Les opérations suivantes sont effectuées pendant la procédure de mise à jour :
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Les paquetages sont mis à jour.
       </para>
      </step>
      <step performance="required">
       <para>
        Le système est redémarré (appuyez sur <guimenu>OK</guimenu>).
       </para>
      </step>
      <step performance="required">
       <para>
        Le système qui vient d'être mis à jour est réenregistré.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      Votre système a été mis à jour vers le Service Pack 3.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.update.sle11sp3.online.zypper">
   <title>Migration en ligne avec <command>zypper</command></title>
   <procedure>
    <step performance="required">
     <para>
      Lorsque toutes les conditions requises sont réunies (voir la <xref linkend="sec.update.sle11spx.online.requirements"/>), les <quote>produits</quote> nécessaires pour la migration en ligne sont ajoutés dans <filename>/etc/products.d</filename>. Exécutez la commande suivante pour obtenir la liste de ces produits :
     </para>

<screen>zypper se -t product | grep -h -- "-migration" | cut -d'|' -f2</screen>
     <para>
      Cette commande doit au moins renvoyer <literal os="sles">SUSE_SLES-SP3-migration</literal>. En fonction de l'étendue de l'installation, il se peut que davantage de produits soient répertoriés.
     </para>
    </step>
    <step performance="required">
     <para>
      Installez les produits de migration récupérés lors de l'étape précédente à l'aide de la commande <command>zypper in -t product <replaceable>LIST_OF_PRODUCTS</replaceable></command>, par exemple :
     </para>
<screen os="sles">zypper in -t product SUSE_SLES-SP3-migration</screen>

    </step>
    <step performance="required">
     <para>
      Enregistrez les produits installés lors de l'étape précédente afin d'obtenir les dépôts de mise à jour correspondants :
     </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
    </step>
    <step performance="required">
     <para>
      Rafraîchissez les dépôts et les services :
     </para>
<screen>zypper ref -s</screen>
    </step>
    <step performance="required">
     <para>
      Consultez la liste des dépôts que vous pouvez récupérer avec la commande <command>zypper lr</command>. 
     </para>
     <para>
      Si l'un de ces dépôts n'est pas activé (les dépôts <literal>SP3</literal> ne sont pas activés par défaut lorsque vous suivez ce workflow), activez-le à l'aide de la commande <command>zypper modifyrepo --enable <replaceable>REPOSITORY ALIAS</replaceable></command>, par exemple :
     </para>
<screen os="sles">zypper modifyrepo --enable SLES11-SP3-Core SLES11-SP3-Updates</screen>

     <para>
      Si votre configuration contient des dépôts tiers qui risquent de ne pas être compatibles avec SP3, désactivez-les à l'aide de la commande <command>zypper modifyrepo --disable <replaceable>REPOSITORY ALIAS</replaceable></command>.
     </para>
    </step>
    <step performance="required">
     <para>
      À présent, tous les éléments sont réunis pour effectuer la mise à niveau de distribution avec <command>zypper dup --from <replaceable>REPO 1</replaceable> --from <replaceable>REPO 2</replaceable> <replaceable>...</replaceable></command>. Veillez à répertorier tous les dépôts nécessaires avec <option>--from</option>, par exemple :
     </para>
<screen os="sles">zypper dup --from SLES11-SP3-Pool --from SLES11-SP3-Updates</screen>

     <para>
      Confirmez avec <guimenu>y</guimenu> pour lancer la mise à niveau.
     </para>
    </step>
    <step performance="required">
     <para>
      Une fois la mise à niveau de distribution de l'étape précédente terminée, exécutez la commande suivante :
     </para>
<screen>zypper update -t patch</screen>
    </step>
    <step performance="required">
     <para>
      La mise à niveau vers SP3 ayant été effectuée, vous devez réenregistrer votre produit :
     </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
    </step>
    <step performance="required">
     <para>
      Pour terminer, redémarrez votre système.
     </para>
    </step>
    <step performance="required">
     <para>
      Votre système a été mis à jour vers le Service Pack 3.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.update.sle11spx.online">
   <title>Migration en ligne</title>
   <para>
    Lors d'une migration en ligne, la mise à jour s'effectue depuis le système en cours d'exécution. Il vous suffit d'effectuer un seul redémarrage, une fois la mise à jour terminée.
   </para>
   <sect3 id="sec.update.sle11spx.online.requirements">
    <title>Configuration requise</title>
    <para>
     Pour pouvoir effectuer une mise à jour en ligne, les conditions suivantes doivent être réunies. Veuillez également lire la <xref linkend="sec.update.prep"/>.
    </para>
    <variablelist>
     <varlistentry>
      <term>Enregistrement du produit</term>
      <listitem>
       <para>
        Pour qu'il soit possible de se connecter aux dépôts de mise à jour, votre produit doit être enregistré. S'il ne l'est pas, vous pouvez exécuter le module <guimenu>Configuration de SUSE Customer Center</guimenu> dans YaST ou l'outil de ligne de commande <command>suse_register</command> pour lancer l'enregistrement.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Exécution d'une mise à jour en ligne</term>
      <listitem>
       <para>
        Assurez-vous que les correctifs les plus récents sont installés sur la version actuelle. Effectuez une mise à jour en ligne avant de procéder à une migration en ligne. Si vous utilisez une interface graphique, démarrez le module Mise à jour en ligne de YaST ou l'applet de mise à jour. Exécutez les commandes suivantes sur la ligne de commande (la dernière commande doit être exécutée à deux reprises) :
       </para>
<screen>zypper ref -s
zypper update -t patch
zypper update -t patch</screen>
       <para>
        Redémarrez le système si nécessaire.
       </para>
       <para>
        Reportez-vous au <xref linkend="cha.onlineupdate.you"/> ou à la <xref linkend="sec.zypper.softup"/>. pour plus d'informations. sur les outils de mise à jour en ligne.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Logiciels tiers</term>
      <listitem>
       <para>
        Si votre configuration implique un logiciel tiers ou supplémentaire, testez cette procédure sur une autre machine pour vous assurer que les dépendances ne sont pas brisées par la mise à jour.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <important>
     <title>exécutez toujours une migration en ligne complète.</title>
     <para>
      La migration en ligne doit toujours être effectuée du début à la fin. L'interruption de la procédure entraînera une corruption irrécupérable du système. 
     </para>
    </important>
   </sect3>
   <sect3 id="sec.update.sle11spx.online.wagon">
    <title>Migration en ligne avec YaST <guimenu>Wagon</guimenu></title>
    <note>
     <para>
      La migration en ligne avec YaST Wagon n'est disponible qu'avant SUSE Linux Enterprise Server 12.
     </para>
    </note>
    <procedure>
     <step performance="required">
      <para>
       Lorsque toutes les conditions requises sont réunies (voir la <xref linkend="sec.update.sle11spx.online.requirements"/>), l'applet de mise à jour affiche un message dans la barre système qui indique la disponibilité d'une mise à niveau de distribution. Cliquez sur celui-ci pour démarrer YaST <guimenu>Wagon</guimenu>. Une autre solution consiste à exécuter <command>/usr/sbin/wagon</command> en tant qu'utilisateur <systemitem class="username">root</systemitem> à partir de la ligne de commande.
      </para>
     </step>
     <step performance="required">
      <para>
       Confirmez la boîte de dialogue <guimenu>Bienvenue</guimenu> en cliquant sur <guimenu>Suivant</guimenu>.
      </para>
     </step>
     <step performance="required">
      <para>
       Si <guimenu>Wagon</guimenu> détermine que des conditions requises ne sont pas réunies (des mises à jour de maintenance requises sont disponibles, mais n'ont pas encore été installées), il procède à une mise à jour automatique, ce qui peut nécessiter un redémarrage. Suivez les instructions à l'écran.
      </para>
     </step>
     <step performance="required">
      <para>
       Choisissez la méthode de mise à jour dans la boîte de dialogue suivante. Sélectionnez <guimenu>Novell Customer Center</guimenu> pour utiliser la configuration par défaut (recommandé).
      </para>
      <para>
       Cliquez sur <guimenu>URL personnalisée</guimenu> pour choisir manuellement les dépôts logiciels utilisés pour la migration en ligne. La liste des dépôts est affichée. Vous avez alors la possibilité d'activer, de désactiver, d'ajouter ou de supprimer manuellement des dépôts. Ajoutez la ou les sources de mise à jour SP2. Il peut s'agir du support d'installation SP2 ou des dépôts <literal>SP2-Core</literal> et <literal>SP2-Updates</literal>. Cliquez sur <guimenu>OK</guimenu> pour revenir à la boîte de dialogue <guimenu>Méthode de mise à jour</guimenu>.
      </para>
      <para>
       Si vous souhaitez passer en revue les modifications apportées à la configuration des dépôts par la procédure de mise à jour, sélectionnez <guimenu>Vérifier les modifications de dépôts automatiques</guimenu>.
      </para>
      <para>
       Cliquez ensuite sur <guimenu>Suivant</guimenu>.
      </para>
     </step>
     <step performance="required">
      <para>
       Le système va être réenregistré. Au cours de cette procédure, les dépôts <literal>SP2-Core</literal> et <literal>SP2-Updates</literal> seront ajoutés au système (pour plus d'informations, reportez-vous à la <xref linkend="sec.update.nmm.repositories"/>). Confirmez l'ajout des dépôts.
      </para>
     </step>
     <step performance="required">
      <para>
       Si vous avez sélectionné l'option <guimenu>Vérifier les modifications de dépôts automatiques</guimenu> dans la boîte de dialogue <guimenu>Méthode de mise à jour</guimenu>, la liste des dépôts s'affiche. Elle vous offre la possibilité d'activer, de désactiver, d'ajouter ou de supprimer manuellement des dépôts. Dès que vous avez terminé, appuyez sur <guimenu>OK</guimenu>.
      </para>
     </step>
     <step performance="required">
      <para>
       Choisissez le type de migration :
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>Migration complète</guimenu>
        </term>
        <listitem>
         <para>
          Met à jour tous les paquetages vers le niveau SP2 le plus récent.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Migration minimale</guimenu>
        </term>
        <listitem>
         <para>
          Met à jour un ensemble minimal de paquetages vers le niveau SP2 le plus récent.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Cliquez sur <guimenu>Avancé</guimenu> afin de sélectionner manuellement les dépôts utilisés pour la mise à niveau.
      </para>
      <para>
       Confirmez votre sélection.
      </para>
     </step>
     <step performance="required">
      <para>
       L'écran <guimenu>Paramètres de mise à niveau de la distribution</guimenu> s'ouvre. Il présente un résumé de la configuration de mise à jour. Les sections suivantes sont disponibles :
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>Produits complémentaires</guimenu>
        </term>
        <listitem>
         <para>
          Vous pouvez ajouter des produits complémentaires SUSE Linux Enterprise Server ou des produits tiers à cet emplacement.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Options de mise à jour</guimenu>
        </term>
        <listitem>
         <para>
          Cette section affiche la liste des actions qui seront effectuées au cours de la mise à jour. Vous pouvez soit télécharger tous les paquetages avant de les installer (option par défaut recommandée), soit les télécharger et les installer un par un.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Paquetages</guimenu>
        </term>
        <listitem>
         <para>
          Aperçu statistique de la mise à jour.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Sauvegarde</term>
        <listitem>
         <para>
          Vous pouvez définir les options de sauvegarde.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Cliquez sur <guimenu>Suivant</guimenu> et <guimenu>Démarrer la mise à jour</guimenu> pour continuer.
      </para>
      <important>
       <title>interruption de la migration en ligne</title>
       <para>
        Vous pouvez interrompre la procédure de migration en ligne en toute sécurité sur cet écran <emphasis>avant</emphasis> de cliquer sur <guimenu>Démarrer la mise à jour</guimenu>, ainsi que sur tous les écrans précédents. Cliquez sur <guimenu>Interrompre</guimenu> pour abandonner la procédure de mise à jour et rétablir le système dans l'état dans lequel il se trouvait avant le démarrage de YaST Wagon. Suivez les instructions à l'écran et effectuez un réenregistrement avant de quitter Wagon, afin de supprimer les dépôts SP2 de votre système.
       </para>
      </important>
     </step>
     <step performance="required">
      <para>
       Les opérations suivantes sont effectuées pendant la procédure de mise à jour :
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         Les paquetages sont mis à jour.
        </para>
       </step>
       <step performance="required">
        <para>
         Le système est redémarré (appuyez sur <guimenu>OK</guimenu>).
        </para>
       </step>
       <step performance="required">
        <para>
         Le système qui vient d'être mis à jour est réenregistré.
        </para>
       </step>
      </substeps>
     </step>
     <step performance="required">
      <para>
       Votre système a été mis à jour vers le Service Pack 2.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec.update.sle11spx.online.zypper">
    <title>Migration en ligne avec <command>zypper</command></title>
    <procedure>
     <step performance="required">
      <para>
       Lorsque toutes les conditions requises sont réunies (voir la <xref linkend="sec.update.sle11spx.online.requirements"/>), les <quote>produits</quote> nécessaires pour la migration en ligne sont ajoutés dans <filename>/etc/products.d</filename>. Exécutez la commande suivante pour obtenir la liste de ces produits :
      </para>

<screen>zypper se -t product | grep -h -- "-migration" | cut -d'|' -f2</screen>
      <para>
       Cette commande doit au moins renvoyer <literal os="sles">SUSE_SLES-SP2-migration</literal>. En fonction de l'étendue de l'installation, il se peut que davantage de produits soient répertoriés.
      </para>
     </step>
     <step performance="required">
      <para>
       Installez les produits de migration récupérés lors de l'étape précédente à l'aide de la commande <command>zypper in -t product <replaceable>LIST_OF_PRODUCTS</replaceable></command>, par exemple :
      </para>
<screen os="sles">zypper in -t product SUSE_SLES-SP2-migration</screen>

     </step>
     <step performance="required">
      <para>
       Enregistrez les produits installés lors de l'étape précédente afin d'obtenir les dépôts de mise à jour correspondants :
      </para>
<screen>suse_register -d 2 -L /root/.suse_register.log'</screen>
     </step>
     <step performance="required">
      <para>
       Rafraîchissez à nouveau les dépôts et les services :
      </para>
<screen>zypper ref -s</screen>
     </step>
     <step performance="required">
      <para>
       Consultez la liste des dépôts que vous pouvez récupérer avec la commande <command>zypper lr</command>. Il faut, <emphasis>au minimum</emphasis>, que les dépôts suivants soient définis sur <guimenu>Activé</guimenu> :
      </para>
      <itemizedlist os="sles" mark="bullet" spacing="normal">
       <listitem>
        <para>
         <literal>SLES11-SP1-Pool</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP1-Updates</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP2-Core</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>SLES11-SP2-Updates</literal>
        </para>
       </listitem>
      </itemizedlist>
      
      <para>
       En fonction de l'étendue de votre installation, d'autres dépôts doivent être activés pour des produits complémentaires ou des extensions.
      </para>
      <para>
       Si l'un de ces dépôts n'est pas activé (les dépôts <literal>SP2</literal> ne sont pas activés par défaut lorsque vous suivez ce workflow), activez-le à l'aide de la commande <command>zypper modifyrepo --enable <replaceable>REPOSITORY ALIAS</replaceable></command>, par exemple :
      </para>
<screen os="sles">zypper modifyrepo --enable SLES11-SP2-Core SLES11-SP2-Updates</screen>

      <para>
       Si votre configuration contient des dépôts tiers qui risquent de ne pas être compatibles avec SP2, désactivez-les à l'aide de la commande <command>zypper modifyrepo --disable <replaceable>REPOSITORY ALIAS</replaceable></command>.
      </para>
     </step>
     <step performance="required">
      <para>
       À présent, tous les éléments sont réunis pour effectuer la mise à niveau de distribution avec <command>zypper dup --from <replaceable>REPO 1</replaceable> --from <replaceable>REPO 2</replaceable> <replaceable>...</replaceable></command>. Veillez à répertorier tous les dépôts nécessaires avec <option>--from</option>, par exemple :
      </para>
<screen os="sles">zypper dup --from SLES11-SP2-Core --from SLES11-SP2-Updates</screen>

      <para>
       Confirmez avec <guimenu>y</guimenu> pour lancer la mise à niveau.
      </para>
     </step>
     <step performance="required">
      <para>
       La fin de la procédure de mise à niveau de distribution signifie qu'une migration minimale a été effectuée (un ensemble minimal de paquetages a donc été mis à jour vers le niveau SP2 le plus récent). Ignorez cette étape si vous n'avez pas l'intention d'effectuer une migration complète.
      </para>
      <para>
       Pour effectuer une migration complète (mise à jour de tous les paquetages vers le niveau SP2 le plus récent), exécutez la commande suivante :
      </para>
<screen>zypper update -t patch</screen>
     </step>
     <step performance="required">
      <para>
       Une fois la mise à niveau vers SP2 terminée, vous devez réenregistrer votre produit :
      </para>
<screen>suse_register -d 2 -L /root/.suse_register.log</screen>
     </step>
     <step performance="required">
      <para>
       Pour terminer, redémarrez votre système.
      </para>
     </step>
     <step performance="required">
      <para>
       Votre système a été mis à jour vers le Service Pack 2.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec.update.sle11spx.medium">
   <title>Mise à jour au moyen d'un démarrage à partir d'une source d'installation</title>
   <para>
    Au lieu de procéder à une migration en ligne (pour plus d'informations, voir la <xref linkend="sec.update.sle11spx.online"/>), vous pouvez mettre à jour votre système en le démarrant à partir d'une source d'installation : soit un DVD, soit une source d'installation réseau. La mise à jour démarre comme une installation normale.
   </para>
   <para>
    Les images ISO du Service Pack 2 sont disponibles à l'adresse suivante : <ulink url="http://download.suse.com/"/>. Vous pouvez soit les graver sur un DVD, soit préparer une source d'installation réseau en suivant la procédure décrite à la <xref linkend="sec.deployment.remoteinst.instserver"/>.
   </para>
   <sect3 id="sec.upgrade.install-from-dvd">
    <title>Mise à jour à partir d'un lecteur de DVD local</title>
    <para>
     Avant de procéder à une nouvelle installation d'un Service Pack SUSE Linux Enterprise, assurez-vous que tous les supports d'installation de Service Packs (DVD) sont disponibles.
    </para>
    <procedure id="upgrade.sp.instsp.fromsp">
     <title>Démarrage à partir du support du Service Pack</title>
     <step performance="required">
      <para>
       Introduisez le premier support de Service Pack SUSE Linux Enterprise et démarrez votre machine. Un écran de démarrage semblable à celui de l'installation d'origine de SUSE Linux Enterprise 11 s'affiche.
      </para>
     </step>
     <step performance="required">
      <para>
       Sélectionnez <guimenu>Installation</guimenu> et suivez les instructions d'installation de YaST dans le <xref linkend="cha.inst"/>.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec.upgrade.install-from-network">
    <title>Mise à jour à partir d'une source d'installation réseau</title>
    <para>
     Avant de lancer la mise à jour d'un SP SUSE Linux Enterprise à partir d'une source d'installation réseau, veillez à ce que les conditions suivantes soient réunies :
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Une source d'installation réseau est configurée conformément à la <xref linkend="sec.deployment.remoteinst.instserver"/>.
      </para>
     </listitem>
     <listitem>
      <para>
       Une connexion réseau est établie sur le serveur d'installation et l'ordinateur cible, avec un service de noms, DHCP (facultatif, mais requis pour le démarrage PXE) et OpenSLP (facultatif).
      </para>
     </listitem>
     <listitem>
      <para>
       Le DVD 1 du Service Pack SUSE Linux Enterprise permettant de démarrer le système cible <emphasis>ou</emphasis> un système cible configuré pour le démarrage PXE conformément à la <xref linkend="sec.deployment.remoteinst.boot.pxeprep" xrefstyle="HeadingOnPage"/> est présent.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Reportez-vous au <xref linkend="cha.deployment.remoteinst"/> pour obtenir des informations détaillées sur le démarrage d'une mise à niveau à partir d'un serveur distant.
    </para>
    <sect4 id="sec.upgrade.install-from-network.dvdboot">
     <title>Installation réseau – Démarrage à partir du DVD</title>
     <para>
      Pour effectuer une installation réseau en utilisant le DVD du Service Pack comme support de démarrage, procédez de la façon suivante :
     </para>
     <procedure>
      <step performance="required">
       <para>
        Introduisez le DVD 1 de Service Pack SUSE Linux Enterprise et démarrez votre machine. Un écran de démarrage semblable à celui de l'installation d'origine de SUSE Linux Enterprise 11 s'affiche.
       </para>
      </step>
      <step performance="required">
       <para>
        Sélectionnez <guimenu>Installation</guimenu> pour démarrer le kernel du service pack, puis appuyez sur <keycap>F4</keycap> pour sélectionner le type de source d'installation réseau (FTP, HTTP, NFS ou SMB).
       </para>
      </step>
      <step performance="required">
       <para>
        Fournissez les informations appropriées sur les chemins ou sélectionnez <guimenu>SLP</guimenu> comme source d'installation.
       </para>
      </step>
      <step performance="required">
       <para>
        Sélectionnez le serveur d'installation approprié parmi ceux proposés ou utilisez l'invite de saisie des options de démarrage pour indiquer le type de source d'installation et son emplacement actuel, comme dans la section <xref linkend="sec.i.yast2.source.net"/>. YaST se lance.
       </para>
       <para>
        Terminez l'installation conformément aux instructions de la <xref linkend="sec.update.sle11spx.medium.update"/>.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 id="sec.upgrade.install-from-network.pxeboot">
     <title>Installation réseau—Démarrage de PXE</title>
     <para>
      Pour effectuer une installation réseau d'un Service Pack SUSE Linux Enterprise via le réseau, procédez comme suit :
     </para>
     <procedure>
      <step performance="required">
       <para>
        Ajustez la configuration de votre serveur DHCP afin de fournir les informations relatives à l'adresse requises pour le démarrage de PXE, conformément à la <xref linkend="sec.deployment.remoteinst.boot.pxeprep"/>.
       </para>
      </step>
      <step performance="required">
       <para>
        Configurez le serveur TFTP qui devra contenir l'image de démarrage requise pour le démarrage de PXE.
       </para>
       <para>
        Pour ce faire, utilisez le premier CD ou DVD de votre Service Pack SUSE Linux Enterprise et suivez les instructions de la <xref linkend="sec.deployment.remoteinst.boot.tftp"/>.
       </para>
      </step>
      <step performance="required">
       <para>
        Préparez le démarrage de PXE et Wake-on-LAN sur l'ordinateur cible.
       </para>
      </step>
      <step performance="required">
       <para>
        Lancez le démarrage du système cible et utilisez VNC pour vous connecter à distance à la routine d'installation s'exécutant sur cet ordinateur. Pour plus d'informations, reportez-vous à la <xref linkend="sec.deployment.remoteinst.monitor.vnc"/>.
       </para>
      </step>
      <step performance="required">
       <para>
        Terminez l'installation conformément aux instructions de la <xref linkend="sec.update.sle11spx.medium.update"/>.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 id="sec.update.sle11spx.medium.update">
    <title>Procédure de mise à jour</title>
    <para>
     Après avoir démarré le système à partir d'un support d'installation ou du réseau, procédez comme suit pour lancer la mise à jour :
    </para>
    <procedure>
     <step performance="required">
      <para>
       Sur l'écran <guimenu>Bienvenue</guimenu>, sélectionnez la <guimenu>Langue</guimenu> et le <guimenu>Clavier</guimenu>, puis acceptez l'accord de licence. Cliquez ensuite sur <guimenu>Suivant</guimenu>.
      </para>
     </step>
     <step performance="required">
      <para>
       Si vous avez démarré le système à partir d'un support physique, procédez à une <guimenu>Vérification des supports</guimenu> pour en vérifier l'intégrité. N'ignorez cette étape que si vous avez déjà vérifié le support auparavant.
      </para>
     </step>
     <step performance="required">
      <para>
       Sélectionnez <guimenu>Mettre à jour</guimenu> dans l'écran <guimenu>Mode d'installation</guimenu>. Cliquez sur <guimenu>Suivant</guimenu> pour lancer la procédure de mise à jour.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec.update.sle11spx.smt">
   <title>Mise à jour à partir de l'outil SMT (Subscription Management Tool)</title>
   <para>
    Au lieu de télécharger les mises à jour pour chaque système client à partir du serveur de mise à jour SUSE, il est possible d'utiliser l'outil SMT (Subscription Management Tool) pour SUSE Linux Enterprise afin de mettre en miroir les mises à jour sur un serveur local.
   </para>
   <para>
    Cet outil fait office de proxy SUSE Customer Center pour les enregistrements de clients et de dépôt de mises à jour logicielles. Vous trouverez, dans la documentation du SMT, accessible à l'adresse <ulink url="http://www.suse.com/doc/smt11/"/>, un aperçu de ses fonctionnalités, ainsi que des instructions sur sa mise en oeuvre.
   </para>
  </sect2>

  <sect2 id="sec.update.sle11spx.manager">
   <title>Mise à jour via SUSE Manager</title>
   <para>
    SUSE Manager est une solution serveur destinée à fournir des mises à jour, ainsi que des correctifs de sécurité et autres pour les clients SUSE Linux Enterprise. Il s'accompagne d'un ensemble d'outils et d'une interface utilisateur Web pour les tâches de gestion.
   </para>
   <para>
    Vous trouverez, dans la documentation de SUSE Manager, accessible à l'adresse <ulink url="http://www.suse.com/doc/suse_manager/"/>, un aperçu de ses fonctionnalités, ainsi que des instructions sur la configuration du serveur et des clients.
   </para>
  </sect2>
 </sect1>

 <sect1 id="sec.update.sle12">
  <title>Mise à niveau vers SLE 12</title>

  

  <para>
   La mise à niveau de SUSE Linux Enterprise 11 SP3 (ou version ultérieure) vers SUSE Linux Enterprise 12 est prise en charge par les outils suivants :
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Mise à niveau manuelle, démarrage à partir d'une image ISO (voir la <xref linkend="sec.update.sle12.iso"/>)
    </para>
   </listitem>
   <listitem>
    <para>
     Migration semi-automatisée, possible via ssh <phrase os="sles">(voir la <xref linkend="sec.update.sle12.automated"/>)</phrase>
    </para>
   </listitem>
  </itemizedlist>

  <sect2 id="sec.update.sle12.iso">
   <title>
    Mise à niveau manuelle à partir de SUSE Linux Enterprise 11 SP3 ou version ultérieure, à l'aide d'une source d'installation
   </title>
   <para>
    Vous pouvez mettre à niveau votre système en effectuant un démarrage à partir d'une source d'installation, qu'il s'agisse d'un DVD local ou d'une source réseau, comme si vous effectuiez une nouvelle installation. Il vous suffit alors de sélectionner « Mettre à niveau » au lieu de « Installer » dans l'écran de démarrage, pour mettre à niveau le système.
   </para>

   <procedure id="pro.update.sle12.iso">
    <title>
     Mise à niveau manuelle à partir de SUSE Linux Enterprise 11 SP3 ou version ultérieure, à l'aide d'une image ISO SUSE Linux Enterprise 12
   </title>
    <step performance="required">
     <para>
      Sélectionnez une méthode de démarrage pour démarrer le système à partir de l'image ISO (voir la <xref linkend="sec.i.yast2.method"/>).
     </para>
    </step>
    <step performance="required">
     <para>
      Démarrez le système à partir de l'image ISO (voir la <xref linkend="sec.i.yast2.startup"/>).
     </para>
     <para>
      Sur l'écran de démarrage, sélectionnez « Mettre à niveau » pour lancer la mise à niveau du système.
     </para>
     <warning>
      <para>
       Si vous sélectionnez « Installer », une perte de données risque de survenir ultérieurement. Vous devez faire preuve d'une extrême prudence pour ne pas détruire vos partitions de données au cours d'une nouvelle installation, par exemple, en repartitionnant les disques (ce qui peut détruire les partitions existantes) ou en reformatant les partitions de données (ce qui efface toutes les données qui y sont stockées). Dans le cas présent, SUSE conseille de sélectionner « Mettre à niveau ».
      </para>
     </warning>
    </step>
    <step performance="required">
     <para>
      Effectuez la procédure de mise à niveau habituelle (voir la <xref linkend="sec.update.sle11spx.medium.update"/>).
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.update.sle12.automated">
   <title>Migration automatisée depuis SUSE Linux Enterprise 11 SP3 vers SUSE Linux Enterprise 12</title>
   <para>
    Pour effectuer une migration automatisée, procédez comme suit :
   </para>
   <procedure id="pro.update.sle12">
    <title>Migration automatisée depuis SUSE Linux Enterprise 11 SP3 vers SUSE Linux Enterprise 12</title>
    
    
    <step performance="required">
     <para>
      Copiez le kernel d'installation <filename>linux</filename> et le fichier <filename>initrd</filename> à partir du répertoire <filename>/boot/x86_64/loader/</filename> de votre premier DVD d'installation dans le répertoire <filename>/boot</filename> de votre système :
     </para>
     <screen><command>cp</command> -vi <replaceable>DVDROOT</replaceable>/boot/x86_64/loader/linux /boot/linux.upgrade
<command>cp</command> -vi <replaceable>DVDROOT</replaceable>/boot/x86_64/loader/initrd /boot/initrd.upgrade</screen>
     <para>
      <replaceable>DVDROOT</replaceable> indique le chemin où votre système monte le DVD ; il s'agit généralement de <filename>/run/media/$USER/$DVDNAME</filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Ouvrez le fichier de configuration hérité GRUB <filename>/boot/grub/menu.lst</filename> et ajoutez une autre section. Pour les autres chargeurs de démarrage, modifiez le ou les fichiers de démarrage correspondants. Réglez les noms de périphérique en conséquence. Par exemple :
     </para>
     <screen>title Linux Upgrade Kernel
kernel (hd0,0)/boot/linux.upgrade root=/dev/sda1 upgrade <replaceable>OPTIONAL_PARAMETERS</replaceable>
initrd (hd0,0)/boot/initrd.upgrade</screen>
     <para>
      <replaceable>OPTIONAL_PARAMETERS</replaceable> indique des paramètres de démarrage supplémentaires dont vous pourriez avoir besoin pour démarrer votre système et effectuer la mise à niveau. Il peut s'agir de paramètres de kernel nécessaires pour votre système. Il se peut que vous deviez les copier à partir d'une entrée GRUB existante. Il peut également s'agir de <ulink url="http://en.opensuse.org/Linuxrc">paramètres linuxrc SUSE, documentés en ligne</ulink>.
     </para>
    </step>
    <step performance="required">
     <para>
      Si la mise à niveau doit être effectuée de manière automatisée <phrase os="sles"> (voir la <xref linkend="sec.update.auto.run"/>)</phrase>, ajoutez <option>autoupgrade=1</option> à la fin de la ligne <literal>kernel</literal> de votre configuration GRUB.
     </para>
    </step>
    <step performance="required">
     <para>
      Redémarrez votre machine et sélectionnez la nouvelle section à partir du menu de démarrage (dans le cas présent : <emphasis>Linux Upgrade Kernel</emphasis>). Vous pouvez utiliser <command>grubonce</command> pour présélectionner la nouvelle entrée grub pour un redémarrage automatique dans la nouvelle entrée. Vous pouvez également utiliser <command>reboot</command> pour lancer le redémarrage à partir de la ligne de commande.
     </para>
    </step>
    <step performance="required">
     <para>
      Effectuez la procédure de mise à niveau habituelle (voir la <xref linkend="sec.update.sle11spx.medium.update"/>).
     </para>
    </step>
    <step performance="required">
     <para>
      Une fois la procédure de mise à niveau terminée, supprimez le kernel d'installation et les fichiers initrd (<filename>/boot/linux.upgrade</filename> et <filename>/boot/initrd.upgrade</filename>). Ils sont désormais inutiles.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="update_split_brain.xml" parse="xml"/>

 <sect1 id="sec.update.nmm">
  <title>Informations générales : Cycle de vie de SUSE Linux Enterprise</title>

  <para>
   
   SUSE Linux Enterprise Server présente un cycle de vie de 13 ans, soit 10 ans de support général et 3 ans de support étendu.
  </para>

  <para>
   SUSE Linux Enterprise Desktop présente un cycle de vie de 10 ans, soit 7 ans de support général et 3 ans de support étendu.
  </para>

  <para>
   Des versions majeures sont publiées tous les 4 ans. Les Service Packs sont disponibles tous les 18 mois.
  </para>

  <para>
   SUSE prend en charge les Service Packs antérieurs pendant une période de 6 mois après la sortie du nouveau Service Pack. La <xref linkend="fig.update.releases.service.packs"/> représente certains aspects mentionnés.
  </para>

  <figure id="fig.update.releases.service.packs">
   <title>Versions majeures et Service Packs</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="new-maintenance-model.svg" width="75%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="new-maintenance-model.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Si vous avez besoin de plus de temps pour concevoir, valider et tester vos plans de mise à niveau, le Support à long terme au niveau des Service Packs vous offre une extension de support de 12 à 36 mois, par incréments de 12 mois, ce qui vous garantit un support total de 3 à 5 ans sur un Service Pack donné (voir la <xref linkend="fig.update.maintenance.long-term-service-pack"/>).
  </para>

  <figure id="fig.update.maintenance.long-term-service-pack">
   <title>Support à long terme au niveau des service packs</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="new-maintenance-model+ltss.svg" width="75%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="new-maintenance-model+ltss.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 id="sec.update.supportlevel-lifecycle">
   <title>Niveaux de support</title>
   <para>
    Les niveaux de support étendu sont valables entre la dixième année et la treizième année. Ces niveaux de support proposent des diagnostics permanents de niveau technique L3 et des résolutions réactives des bogues critiques. Ils appliquent des mises à jour de sécurité à tout exploit racine banal dans le kernel ou tout autre exploit racine directement exécutable sans l'intervention de l'utilisateur. Ils prennent également en charge les environnements système, les piles logicielles et le matériel avec une liste d'exclusion de paquetage limitée. Voir <xref linkend="tab.security-and-bug-fixes"/> pour découvrir une présentation.
   </para>
   <table id="tab.security-and-bug-fixes">
    <title>Mises à jour de sécurité et résolution des bogues</title>
    <tgroup cols="6">
     <colspec colname="c1"/>
     <colspec colname="c2"/>
     <colspec colname="c3"/>
     <colspec colname="c4"/>
     <colspec colname="c5"/>
     <colspec colname="c6"/>
     <thead>
      <row>
       <entry/>
       <entry namest="c2" nameend="c4" align="center">
        <para>
         Support étendu pour les Service Packs les plus récents
        </para>
       </entry>
       <entry>
        <para>
         Support général pour les Service Packs précédents, avec LTSS
        </para>
       </entry>
       <entry>
        <para>
         Support étendu avec LTSS
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Fonction
        </para>
       </entry>
       <entry>
        <para>
         Années 1 à 5
        </para>
       </entry>
       <entry>
        <para>
         Années 6 et 7
        </para>
       </entry>
       <entry>
        <para>
         Années 8 à 10
        </para>
       </entry>
       <entry>
        <para>
         Années 4 à 10
        </para>
       </entry>
       <entry>
        <para>
         Années 10 à 13
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Services techniques
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Accès aux correctifs
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Accès à la documentation et à la base de connaissances
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Support des piles et workloads existants
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Support des nouveaux déploiements
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Demandes d'amélioration
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Activation et optimisation du matériel
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Mises à jour de pilotes via le programme SUSE SolidDriver (précédemment PLDP)
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         Non
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Rétroportage des correctifs des Service Packs récents
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (sur la base des demandes des partenaires et des clients)
        </para>
       </entry>
       <entry>
        <para>
         S/O
        </para>
       </entry>
       <entry>
        <para>
         S/O
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Mises à jour de sécurité critiques
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Résolution des défauts
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Oui
        </para>
       </entry>
       <entry>
        <para>
         Limité (défauts de niveaux de gravité 1 et 2 uniquement)
        </para>
       </entry>
       <entry>
        <para>
         Limité (défauts de niveaux de gravité 1 et 2 uniquement)
        </para>
       </entry>
       <entry>
        <para>
         Limité (défauts de niveaux de gravité 1 et 2 uniquement)
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect2>

  <sect2 id="sec.update.nmm.repositories">
   <title>Modèle de dépôt</title>

   <para>
    La disposition des dépôts correspond aux cycles de vie des produits. Le <xref linkend="tab.update.nmm.repositories.sp2"/> contient la liste de tous les dépôts de SUSE Linux Enterprise 11 SP2 vers SUSE Linux Enterprise 12.
   </para>
   <table id="tab.update.nmm.repositories.sp2">
    <title>Disposition des dépôts pour SUSE Linux Enterprise 11 SP2 et SP3, et SUSE Linux Enterprise 12</title>

    <tgroup cols="3">
     <colspec colnum="1" colname="c1" colwidth="1.2*"/>
     <colspec colnum="2" colname="c2" colwidth="3*"/>
     <colspec colnum="3" colname="c3" colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         Type
        </para>
       </entry>
       <entry>
        <para>
         SLES
        </para>
       </entry>
       <entry>
        <para>
         SLED
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Dépôts requis
        </para>
       </entry>
       <entry>
        <para>
         11 SP2
        </para>
        <simplelist>
         <member><literal>SLES11-SP1-Pool</literal> </member> <member><literal>SLES11-SP1-Updates</literal> </member> <member><literal>SLES11-SP2-Core</literal> </member> <member><literal>SLES11-SP2-Updates</literal> </member>
        </simplelist>
        <para>
         11 SP3
        </para>
        <simplelist>
         <member><literal>SLES11-SP3-Pool</literal> </member> <member><literal>SLES11-SP3-Updates</literal> </member>
        </simplelist>
        <para>
         12
        </para>
        <simplelist>
         <member><literal>SLES12-GA-Pool</literal> </member> <member><literal>SLES12-GA-Updates</literal> </member>
        </simplelist>
       </entry>
       <entry>
        <para>
         11 SP2
        </para>
        <simplelist>
         <member><literal>SLED11-SP1-Pool</literal> </member> <member><literal>SLED11-SP1-Updates</literal> </member> <member><literal>SLED11-SP2-Core</literal> </member> <member><literal>SLED11-SP2-Updates</literal> </member>
        </simplelist>
        <para>
         11 SP3
        </para>
        <simplelist>
         <member><literal>SLED11-SP3-Pool</literal> </member> <member><literal>SLED11-SP3-Updates</literal> </member>
        </simplelist>
        <para>
         12
        </para>
        <simplelist>
         <member><literal>SLED12-GA-Pool</literal> </member> <member><literal>SLED12-GA-Updates</literal> </member>
        </simplelist>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dépôts facultatifs
        </para>
       </entry>
       <entry>
        <para>
         11 SP2
        </para>
        <simplelist>
         <member><literal>SLES11-SP2-Debuginfo-Core</literal> </member> <member><literal>SLES11-SP2-Debuginfo-Updates</literal> </member> <member><literal>SLES11-Extras</literal> </member> <member><literal>SLES11-SP2-Extension-Store</literal> </member>
        </simplelist>
        <para>
         11 SP3
        </para>
        <simplelist>
         <member><literal>SLES11-SP3-Debuginfo-Core</literal> </member> <member><literal>SLES11-SP3-Debuginfo-Updates</literal> </member> <member><literal>SLES11-SP3-Extension-Store</literal> </member> <member><literal>SLES11-Extra</literal> </member>
        </simplelist>
        <para>
         12
        </para>
        <simplelist>
         <member><literal>SLES12-GA-Debuginfo-Core</literal> </member> <member><literal>SLES12-GA-Debuginfo-Updates</literal> </member>
        </simplelist>
       </entry>
       <entry>
        <para>
         11 SP2
        </para>
        <simplelist>
         <member><literal>SLED11-SP2-Debuginfo-Core</literal> </member> <member><literal>SLED11-SP2-Debuginfo-Updates</literal> </member> <member><literal>SLED11-Extras</literal> </member> <member><literal>SLED11-SP2-Extension-Store</literal> </member>
        </simplelist>
        <para>
         11 SP3
        </para>
        <simplelist>
         <member><literal>SLED11-SP3-Debuginfo-Core</literal> </member> <member><literal>SLED11-SP3-Debuginfo-Updates</literal> </member> <member><literal>SLED11-SP3-Extension-Store</literal> </member> <member><literal>SLED11-Extra</literal> </member>
        </simplelist>
        <para>
         12
        </para>
        <simplelist>
         <member><literal>SLED12-GA-Debuginfo-Core</literal> </member> <member><literal>SLED12-GA-Debuginfo-Updates</literal> </member>
        </simplelist>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         NOUVEAU : dépôts spécifiques au <emphasis>module</emphasis>
        </para>
       </entry>
       <entry>
        <para>
         12
        </para>
        <simplelist>
         <member><literal>sle-module-web-scripting</literal> </member> <member><literal>sle-module-adv-systems-management</literal> </member> <member><literal>sle-module-public-cloud</literal> </member> <member><literal>sle-module-legacy</literal> </member>
        </simplelist>
       </entry>
       <entry>
        <para>
         12
        </para>
	
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <variablelist>
    <title>Description des dépôts requis</title>
    <varlistentry>
     <term>Mises à jour</term>
     <listitem>
      <para>
       Mises à jour de maintenance dans le dépôt <literal>Noyau</literal> ou <literal>Pool</literal> correspondant.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Pool</term>
     <listitem>
      <para>
       Contient tous les RPM binaires du support d'installation, ainsi que des informations de modèle et des métadonnées d'état du support.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Description des dépôts facultatifs</title>
    <varlistentry>
     <term>Debuginfo-Pool</term>
     <term>Debuginfo-Updates</term>
     <listitem>
      <para>
       Ces dépôts comprennent du contenu statique. Parmi ces deux dépôts, seul <literal>Debuginfo-Updates</literal> reçoit des mises à jour. Activez ces dépôts si vous devez installer des bibliothèques avec des informations de débogage en cas de problème.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 id="sec.update.nmm.repositories.origin">
    <title>Origine des paquetages</title>
    <formalpara>
     <title>SUSE Linux Enterprise 11 SP3</title>
     <para>
      Avec la mise à jour vers SP3, seuls deux dépôts sont disponibles : <literal os="sles">SLES11-SP3-Pool</literal> et <literal os="sles">SLES11-SP3-Updates</literal>. Tous les dépôts précédents provenant de SP2 sont visibles, mais désactivés. Ces dépôts désactivés ne sont nécessaires que pour les utilisateurs qui présentent des besoins bien spécifiques.
     </para>
    </formalpara>
    <formalpara>
     <title>SUSE Linux Enterprise 12</title>
     <para>
      Avec la mise à jour vers SUSE Linux Enterprise 12, seuls deux dépôts sont disponibles : <literal os="sles">SLES12-GA-Pool</literal> et <literal os="sles">SLES12-GA-Updates</literal>. Tous les dépôts précédents provenant de SUSE Linux Enterprise 11 SP3 sont désactivés.
     </para>
    </formalpara>
   </sect3>
   <sect3 id="sec.update.nmm.repositories.working">
    <title>Utilisation des dépôts</title>
    <para>
     Lors de l'enregistrement, le système reçoit des dépôts de SUSE Customer Center. Les noms de dépôts pointent vers des URI spécifiques de SUSE Customer Center (voir <ulink url="https://scc.suse.com/"/>). Pour répertorier tous les dépôts disponibles sur votre système, utilisez <command>zypper</command> comme suit :
    </para>
<screen>zypper repos -u</screen>

    <para>
     Vous obtenez alors la liste de tous les dépôts disponibles sur votre système. L'alias et le nom sont indiqués pour chaque dépôt. Vous pouvez également savoir si le dépôt est activé et s'il sera rafraîchi. L'option <option>-u</option> vous permet, en outre, de connaître l'URI d'origine.
    </para>
    <para>
     Si vous souhaitez supprimer d'anciens dépôts (de SP1, par exemple), utilisez la commande <command>zypper removerepo</command> et le nom du ou des dépôts. Par exemple, pour supprimer les anciens dépôts SP1 et SP2, utilisez la commande suivante :
    </para>
<screen>zypper removerepo SLES11-SP1-Pool SLES11-SP1-Updates \
    SLE11-SP1-Debuginfo-Pool SLE11-SP1-Debuginfo-Updates \
    SLES11-SP2-Core SLES11-SP2-Updates \
    SLE11-SP2-Debuginfo-Core SLES11-SP2-Extension-Store\
    SLE11-SP2-Debuginfo-Updates</screen>
    <para>
     Si vous souhaitez ajouter à nouveau certains de vos dépôts, connectez-vous au site <ulink url="https://scc.suse.com/"/> et sélectionnez <menuchoice> <guimenu>My Products (Mes produits)</guimenu>  <guimenu>Mirror Credentials</guimenu></menuchoice> (Mettre en miroir les références) dans le menu. La liste des URI est alors affichée. Seuls les dépôts répertoriés dans cette liste de produits peuvent être ajoutés. Par exemple, pour ajouter SP2 Extension Store, utilisez la commande suivante (une seule ligne, sans barre oblique inverse) :
    </para>
<screen>zypper addrepo -n SLES11-SP2-Extension-Store \
    https://nu.novell.com/repo/\$RCE/SLES11-SP2-Extension-Store/nu_novell_com:SLES11-SP2-Extension-Store</screen>
   </sect3>
  </sect2>
 </sect1>
 <sect1 id="sec.update.backports">
  <title>Informations générales : rétroportage de code source</title>

  <para>
   SUSE fait un usage intensif du rétroportage, c'est-à-dire de la migration des fonctions et correctifs logiciels actuels dans les paquetages publiés de SUSE Linux Enterprise. Les informations de cette section vous aident à comprendre en quoi comparer les numéros de version peut s'avérer trompeur lorsqu'il s'agit d'évaluer les fonctionnalités et la sécurité des paquetages SUSE Linux Enterprise. Vous y apprendrez comment SUSE préserve la sécurité des logiciels système et vous permet de disposer en permanence de la version la plus récente, tout en gérant la compatibilité de vos applications au-dessus des produits SUSE Linux Enterprise. Vous y apprendrez également comment vérifier les solutions proposées réellement par le logiciel SUSE Linux Enterprise pour remédier aux problèmes de sécurité publics, ou encore comment vérifier le degré d'actualisation de vos logiciels.

  </para>

  <sect2 id="sec.update.backports.why">
   <title>Pourquoi recourir au rétroportage ?</title>
   <para>
    Les développeurs en amont s'intéressent principalement à faire progresser le logiciel qu'ils développent. Bien souvent, ils mènent de front la correction de bogues et l'introduction de nouvelles fonctionnalités qui n'ont pas encore fait l'objet de tests poussés et qui peuvent, à leur tour, provoquer de nouveaux bogues.
   </para>
   <para>
    Dans le cas des développeurs de distribution, il est important de faire la distinction entre :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      les corrections de bogues avec un potentiel limité en ce qui concerne la perturbation des fonctionnalités et
     </para>
    </listitem>
    <listitem>
     <para>
      les modifications susceptibles de perturber les fonctionnalités existantes.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Dans la plupart des cas, les développeurs de distribution ne suivent pas toutes les modifications en amont dès qu'un paquetage a intégré une distribution publiée. En règle générale, ils s'en tiennent à la version en amont qu'ils ont publiée initialement et créent des correctifs sur la base des modifications en amont afin de corriger les bogues. Cette technique est connue sous le nom de <emphasis>rétroportage</emphasis> (ou backporting en anglais).
   </para>
   <para>
    Les développeurs de distribution ne lancent généralement une nouvelle version de logiciel que dans deux cas bien précis :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      lorsque les modifications entre leurs paquetages et les versions en amont sont devenues à ce point importantes que le rétroportage n'est plus possible ;
     </para>
    </listitem>
    <listitem>
     <para>
      pour les logiciels qui, par nature, vieillissent mal, comme par exemple, les logiciels de lutte contre les programmes malveillants.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 id="sec.update.backports.reasons-for">
   <title>Arguments en faveur du rétroportage</title>
   <para>
    SUSE fait un usage intensif du rétroportage pour qu'il soit possible de trouver un juste équilibre entre plusieurs préoccupations formulées au sujet des logiciels d'entreprise. Les principales préoccupations sont les suivantes :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Disposer d'interfaces (API) stables sur lesquelles les éditeurs de logiciels peuvent compter lors de la création de produits à utiliser sur les solutions d'entreprise de SUSE.
     </para>
    </listitem>
    <listitem>
     <para>
      S'assurer que les paquetages utilisés dans la version des produits d'entreprise de SUSE présentent une qualité optimale et ont fait l'objet de tests intensifs, tant en interne que dans le cadre du produit d'entreprise dans son intégralité.
     </para>
    </listitem>
    <listitem>
     <para>
      Gérer les différentes certifications des produits d'entreprise de SUSE par d'autres éditeurs, telles que les certifications pour les produits Oracle ou SAP.
     </para>
    </listitem>
    <listitem>
     <para>
      Permettre aux développeurs de SUSE de s'atteler au développement d'une nouvelle version du produit qui soit aussi bonne que possible, plutôt que de se disperser sur un grand nombre de versions.
     </para>
    </listitem>
    <listitem>
     <para>
      Bien identifier le contenu d'une version donnée d'un produit d'entreprise, de telle sorte que notre support puisse fournir des informations précises et opportunes la concernant.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 id="sec.update.backports.reasons-against">
   <title>Arguments contre le rétroportage</title>
   <para>
    En règle générale, aucune nouvelle version en amont d'un paquetage n'est introduite dans nos produits d'entreprise. Il ne s'agit toutefois pas d'une règle absolue. Pour une catégorie de paquetages limitée (notamment pour les logiciels anti-virus), les problèmes de sécurité pèsent davantage que l'approche conservatrice qui est préférable sur le plan de l'assurance qualité. Dans ce cas de figure, il arrive que des versions plus récentes soient introduites dans une version publiée d'une gamme de produits d'entreprise.
   </para>
   <para>
    Pour d'autres types de paquetages, il arrive également que l'on opte pour l'introduction d'une nouvelle version plutôt que de recourir au rétroportage. On fait appel à cette méthode lorsque la génération d'un « backport » n'est pas possible d'un point de vue économique ou lorsque l'introduction d'une nouvelle version se justifie pleinement sur le plan technique.
   </para>
  </sect2>

  <sect2 id="sec.update.backports.">
   <title>Implications du rétroportage sur l'interprétation des numéros de version</title>
   <para>
    En raison de la pratique du rétroportage, il est tout simplement impossible de comparer des numéros de version pour déterminer si un paquetage SUSE contient un correctif pour un problème spécifique ou si une fonctionnalité donnée y a été ajoutée. Avec le rétroportage, la partie en amont du numéro de version d'un paquetage SUSE indique simplement la version en amont sur laquelle il est basé. Le paquetage peut contenir des correctifs de bogue et des fonctionnalités qui ne figurent pas dans la version en amont correspondante, mais qui ont fait l'objet d'un rétroportage.
   </para>
   <para>
    Lorsque le rétroportage est appliqué, cette valeur limitée de numéros de version peut occasionner des problèmes au niveau des outils d'analyse de la sécurité. Certains outils de recherche des vulnérabilités en matière de sécurité (ou des tests spécifiques réalisés par ces outils) opèrent uniquement sur les informations de version. Ces outils/tests ont donc tendance à générer des <quote>faux positifs</quote> (détection erronée d'un logiciel vulnérable) lorsque le rétroportage est appliqué. Lors de l'analyse de rapports émanant des outils d'analyse de la sécurité, il convient de déterminer si une entrée est basée simplement sur un numéro de version ou sur un test d'existence d'une vulnérabilité réelle.
   </para>
  </sect2>
  <sect2>
   <title>
    Comment vérifier les bogues qui ont été corrigés et les fonctionnalités qui ont fait l'objet d'un rétroportage et qui sont disponibles ?
   </title>
   <para>
    Les informations relatives aux correctifs et fonctionnalités ayant fait l'objet d'un rétroportage sont stockées à divers endroits :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Journal des modifications du paquetage :
     </para>
<screen>rpm -q --changelog name-of-installed-package
rpm -qp --changelog packagefile.rpm</screen>
     <para>
      La sortie documente brièvement l'historique des modifications du paquetage.
     </para>
    </listitem>
    <listitem>
     <para>
      Le journal des modifications du paquetage peut contenir des entrées telles que <literal>bnc#1234</literal> faisant référence à des bogues présents dans le système de suivi Bugzilla de Novell ou des liens vers d'autres systèmes de suivi de bogues. (Il se peut que vous ne puissiez pas accéder à l'ensemble de ces informations en raison des politiques de confidentialité en vigueur.)
     </para>
    </listitem>
    <listitem>
     <para>
      Un paquetage peut comporter un fichier <filename>/usr/share/doc/<replaceable>nom_paquetage</replaceable>/README.SUSE</filename> ou <filename>README.SuSE</filename> contenant des informations générales et de haut niveau spécifiques au paquetage SUSE.
     </para>
    </listitem>
    <listitem>
     <para>
      Le paquetage source RPM contient les correctifs qui ont été appliqués lors de la création des RPM binaires ordinaires sous la forme de fichiers distincts qu'il est possible d'interpréter si vous êtes rompu à la lecture de code source. Reportez-vous à la <xref linkend="sec.zypper.softman.sources"/> pour installer des sources de logiciels SUSE Linux Enterprise, consultez la <xref linkend="sec.rpm.sources"/> pour créer des paquetages sur SUSE Linux Enterprise et consultez le livre <ulink url="http://www.rpm.org/max-rpm/">Maximum RPM</ulink> (RPM maximum) pour connaître le fonctionnement interne des versions des paquetages SUSE Linux Enterprise.
     </para>
    </listitem>
    <listitem>
     <para>
      Pour les correctifs des bogues de sécurité, consultez les <ulink url="http://www.suse.com/support/security/#1">annonces de sécurité de SUSE</ulink>. Les bogues sont généralement désignés par des noms standard, tels que <literal>CAN-2005-2495</literal>, dont la gestion est assurée dans le cadre du projet <ulink url="http://cve.mitre.org">Common Vulnerabilities and Exposures</ulink>.
     </para>
    </listitem>
   </itemizedlist>

  </sect2>
 </sect1>
 <sect1 id="sec.update.wagonhooks">
  <title>Informations générales : points d'insertion de migration pour YaST Wagon</title>



  <para>
   Les points d'insertion de migration vous permettent d'exécuter un script externe personnalisé à un point du processus de migration. Ces scripts vous offrent la possibilité de traiter des problèmes spécifiques qui ne peuvent pas être gérés au moyen des scripts RPM habituels ou encore d'effectuer d'autres opérations qui peuvent s'avérer nécessaires en cours de migration (et qui ne sont pas requises dans le cadre d'une mise à jour normale du paquetage).
  </para>

  <para>
   Les points d'insertion de migration sont exécutés avec des privilèges root. Il est donc possible d'effectuer toute tâche de maintenance dans les scripts (démarrage/arrêt de services, sauvegarde de données, migration de données, etc.). Les scripts ne doivent pas être interactifs ; STDIN et STDOUT sont redirigés vers des tubes en cas d'exécution dans YaST. La session X ne doit pas être utilisée, car il se peut qu'elle ne soit pas disponible dans tous les cas (lors d'une exécution en mode texte, par exemple). N'oubliez pas de définir l'autorisation d'exécutable pour les scripts hook.
  </para>

  <para>
   Les points d'insertion de migration sont pris en charge dans le paquetage <systemitem class="resource">yast2-wagon</systemitem> version 2.17.32.1 (fournie en tant que mise à jour pour SLES11-SP2) ou 2.17.34 (incluse dans SLES11-SP3) et versions ultérieures.
  </para>

  <sect2>
   <title>Convention d'attribution de noms et emplacement des scripts hook</title>
   <para>
    La recherche des scripts s'effectue dans le répertoire <filename>/var/lib/YaST2/wagon/hooks/</filename>. Le nom de script doit être au format <replaceable>step_seq_prefix_name</replaceable>, où :
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>procédure</replaceable>
     </term>
     <listitem>
      <para>
       est un nom d'étape de migration prédéfini qui décrit l'étape de migration en cours.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>seq</replaceable>
     </term>
     <listitem>
      <para>
       est un numéro de séquence compris entre 00 et 99, ce qui permet de définir l'ordre d'exécution des scripts. (Pour garantir un classement correct, il est important de conserver les zéros de gauche.)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>prefix</replaceable>
     </term>
     <listitem>
      <para>
       doit être unique afin d'éviter les conflits (comme un espace de noms). Utilisez un nom de paquetage (s'il fait partie d'un paquetage) ou votre nom de fournisseur, nom de domaine Internet, etc. ; en fait, tout élément pouvant être considéré comme suffisamment unique.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>name</replaceable>
     </term>
     <listitem>
      <para>
       peut être n'importe quelle chaîne de caractères (sert à différencier les scripts). Il est conseillé d'utiliser un nom descriptif.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <example>
    <title>Script hook avec chemin complet</title>
<screen>/var/lib/YaST2/wagon/hooks/before_package_migration_00_postgresql_backup</screen>
   </example>
  </sect2>

  <sect2>
   <title>Valeur de sortie du script hook</title>
   <para>
    Le script doit renvoyer la valeur de sortie 0. En cas d'échec (toute valeur de sortie non nulle), un message d'erreur s'affiche dans Wagon. Il est alors possible de redémarrer le script, d'ignorer l'erreur (et de poursuivre avec d'autres scripts) ou d'annuler complètement les points d'insertion pour l'étape en cours. 
   </para>
  </sect2>

  <sect2>
   <title>Scripts Idempotent</title>
   <para>
    Les scripts hook <emphasis>peuvent potentiellement être exécutés à plusieurs reprises</emphasis> (lorsque vous basculez entre les différentes boîtes de dialogue de Wagon, il se peut que ce dernier redémarre automatiquement ou que certaines étapes soient exécutées plusieurs fois dans le workflow de migration). Les scripts doivent donc faire face à ce genre de situation (ils peuvent vérifier, au départ, si l'action doit être exécutée ou si elle l'a déjà été, ou encore créer un simple fichier stamp temporaire ou bien résoudre correctement plusieurs exécutions).
   </para>
  </sect2>

  <sect2>
   <title>Liste des points d'insertion pris en charge</title>
   
   <para>
    Certains points d'insertion sont facultatifs (car ils dépendent des résultats précédents ou de valeurs sélectionnées par l'utilisateur). Certains d'entre eux sont appelés à plusieurs reprises (l'enregistrement, par exemple, est appelé avant et après la migration). Voici la liste des points d'insertion pris en charge (noms des étapes) dans l'ordre d'exécution :
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_init</command>
     </term>
     <listitem>
      <para>
       Démarré en tout début de procédure (remarque : il est de nouveau appelé après le redémarrage de Wagon)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_welcome</command>
     </term>
     <term><command>after_welcome</command>
     </term>
     <listitem>
      <para>
       Démarré avant/après l'affichage de la boîte de dialogue de bienvenue
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration_check</command>
     </term>
     <term><command>after_registration_check</command>
     </term>
     <listitem>
      <para>
       Wagon vérifie l'état d'enregistrement (si l'enregistrement de certains produits est arrivé à expiration, il se peut que la migration échoue). Si tout est correct, aucune boîte de dialogue ne s'ouvre et Wagon passe automatiquement à l'étape suivante.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_custom_url</command>
     </term>
     <term><command>after_custom_url</command>
     </term>
     <listitem>
      <para>
       Le gestionnaire de dépôt est démarré(facultatif, en mode CD correctif uniquement).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_self_update</command>
     </term>
     <term><command>after_self_update</command>
     </term>
     <listitem>
      <para>
       Appelé avant/après la migration automatique de Wagon (afin de s'assurer que la version la plus récente est utilisée pour la migration).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_installing_migration_products</command>
     </term>
     <term><command>after_installing_migration_products</command>
     </term>
     <listitem>
      <para>
       Appelé avant/après l'installation des produits de migration.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_selecting_migration_source</command>
     </term>
     <term><command>after_selecting_migration_source</command>
     </term>
     <listitem>
      <para>
       Wagon demande à l'utilisateur de procéder à la migration via des dépôts SUSE Customer Center ou à l'aide d'un dépôt personnalisé ; l'étape suivante dépend de la sélection effectuée par l'utilisateur.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration</command>
     </term>
     <term><command>after_registration</command>
     </term>
     <listitem>
      <para>
       Exécution du registre SUSE (afin d'ajouter des dépôts de migration).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_repo_selection</command>
     </term>
     <term><command>after_repo_selection</command>
     </term>
     <listitem>
      <para>
       Gestion manuelle des dépôts.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_set_migration_repo</command>
     </term>
     <term><command>after_set_migration_repo</command>
     </term>
     <listitem>
      <para>
       Sélection des dépôts de migration (migration complète/minimale en cas d'utilisation de SUSE Customer Center) ou sélection du dépôt de mise à jour (migration personnalisée du dépôt).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_package_migration</command>
     </term>
     <listitem>
      <para>
       Avant le démarrage de la mise à jour du paquetage, et après cette étape, la migration proprement dite démarre et il est impossible de revenir automatiquement à l'état précédent (si vous annulez la migration au cours de cette phase, le système sera inconsistant (mise à niveau partielle) et un retour manuel à la version précédente s'avérera nécessaire).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_registration</command>
     </term>
     <term><command>after_registration</command>
     </term>
     <listitem>
      <para>
       Exécution du registre SUSE (pour enregistrer les produits mis à jour).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_congratulate</command>
     </term>
     <term><command>after_congratulate</command>
     </term>
     <listitem>
      <para>
       Avant/après que Wagon n'affiche la boîte de dialogue Félicitations consécutive à une migration réussie.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_exit</command>
     </term>
     <listitem>
      <para>
       Appelé juste avant la fermeture de Wagon (systématiquement, quel que soit le résultat de la migration ; également après l'annulation et lors du redémarrage).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Points d'insertion d'abandon</title>
   <para>
    Des points d'insertion spéciaux sont appelés lorsque l'utilisateur interrompt la migration. Ils peuvent être appelés à n'importe quelle étape du workflow de migration. L'ordre d'exécution ne peut donc pas être garanti. Les scripts doivent vérifier l'état actuel s'ils dépendent des résultats d'autres points d'insertion.
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_abort</command>
     </term>
     <listitem>
      <para>
       Abandon de la migration confirmé par l'utilisateur.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>before_abort_rollback</command>
     </term>
     <term><command>after_abort_rollback</command>
     </term>
     <listitem>
      <para>
       Retour à la version précédente confirmé par l'utilisateur après l'abandon (retour aux anciens produits installés avant le lancement de la migration). Ces points d'insertion sont appelés après before_abort et ignorés si l'utilisateur ne confirme pas le retour à la version précédente.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Points d'insertion de redémarrage</title>
   <para>
    Ces points d'insertion sont appelés lorsque Wagon effectue un redémarrage automatique.
   </para>
   <variablelist>
    <varlistentry>
     <term><command>before_restart</command>
     </term>
     <listitem>
      <para>
       Wagon se ferme et va être redémarré.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>after_restart</command>
     </term>
     <listitem>
      <para>
       Wagon a redémarré et exécute l'étape suivante du workflow de migration.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2>
   <title>Points d'insertion utilisés généralement</title>
   <para>
    La liste des points d'insertion est relativement volumineuse, mais l'utilisation de nombre d'entre eux ne se justifie que dans des cas bien spécifiques. Dans les cas d'utilisation normaux, il est conseillé d'accorder la préférence aux points d'insertion suivants :
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Pour réaliser une action avant la migration du système (en exécutant toujours la version antérieure), utilisez le point d'insertion <command>before_package_migration</command>.
     </para>
     <para>
      À ce stade, il apparaît clairement que la migration est prête et sur le point de démarrer, alors que, dans toutes les étapes précédentes, il était possible de l'annuler.

     </para>
    </listitem>
    <listitem>
     <para>
      Pour réaliser une action après la migration du système (le système exécute la nouvelle version migrée, mais certains éléments ne sont peut-être pas encore actifs ; un redémarrage est nécessaire pour le kernel mis à jour, les services mis à jour doivent peut-être être redémarrés, etc.), utilisez le point d'insertion <command>before_congratulate</command> ou <command>after_congratulate</command>.
     </para>
     <para>
      Il peut également être utilisé pour effacer les résultats temporaires du point d'insertion <command>before_package_migration</command>. À ce stade, la migration a été effectuée avec succès.
     </para>
    </listitem>
    <listitem>
     <para>
      Pour annuler les modifications en cas d'abandon de la migration, utilisez l'un des points d'insertion d'abandon en fonction du cas. Pour rappel, il est possible d'appeler les points d'insertion d'abandon à tout moment. L'annulation peut donc s'avérer inutile (il se peut que le point d'insertion qui effectue les modifications n'ait pas encore été appelé). Les points d'insertion d'abandon doivent vérifier l'état actuel.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2>
   <title>Points d'insertion obsolètes</title>
   <para>
    Les versions antérieures de Wagon ne prenaient en charge que deux scripts hook, à savoir : <filename>/usr/lib/YaST2/bin/wagon_hook_init</filename> et <filename>/usr/lib/YaST2/bin/wagon_hook_finish</filename>. Le problème était dû au fait qu'un seul script pouvait être exécuté comme point d'insertion et qu'il était impossible de placer directement ces points dans des paquetages RPM.
   </para>
   <para>
    Ces anciens scripts hook sont toujours pris en charge dans les versions plus récentes de Wagon pour des raisons de rétrocompatibilité, mais les nouveaux points d'insertion <command>before_init</command> et <command>before_exit</command> doivent être utilisés au lieu des points obsolètes.
   </para>
  </sect2>
 </sect1>
</chapter>
