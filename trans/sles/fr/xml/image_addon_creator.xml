<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="image_addon_creator.xml" id="cha.addon_creator">
 <title>Création de produits complémentaires avec Add-on Creator</title>
 <abstract>
  <para>
   Un produit complémentaire est un support conçu spécialement (généralement un CD ou un DVD) pour étendre <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> avec votre produit. Add-on Product Creator a été développé pour aider nos clients et partenaires, et simplifier la distribution des logiciels tiers pour tous les produits SUSE.
  </para>

  <para>
   Pour utiliser le module Add-on Product Creator, vous devez installer le paquetage <systemitem class="resource">yast2-add-on-creator</systemitem> à partir du kit SDK SUSE. Le kit SDK est un produit complémentaire pour SUSE Linux Enterprise que vous pouvez télécharger à partir du site <ulink url="http://download.suse.com/"/>. Recherchez ensuite <literal>SUSE Linux Enterprise Software Development Kit</literal>.
  </para>
 </abstract>
 <sect1 id="sec.addon_creator.creating">
  <title>Création d'images</title>

  <para>
   Pour créer une image d'un produit complémentaire, procédez comme suit :
  </para>

  <procedure>
   <step performance="required">
    <para>
     Démarrez YaST et ouvrez le module <guimenu>Add-on Creator</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Si vous n'avez pas encore créé de produits complémentaires, cliquez sur <guimenu>Créer un nouveau produit complémentaire</guimenu> pour commencer. Une autre solution consiste à créer le produit complémentaire sur la base d'un produit existant. Indiquez le chemin d'accès au répertoire contenant les données ; il peut également s'agir d'une image ISO montée ou d'un CD/DVD.
    </para>
    <para>
     Si vous avez déjà créé un produit complémentaire, la fenêtre affiche la liste de tous les produits complémentaires existants. Vous pouvez les <guimenu>modifier</guimenu> ou les <guimenu>supprimer</guimenu> en sélectionnant l'option appropriée. Sélectionnez <guimenu>Ajouter</guimenu> pour en créer un nouveau.
    </para>
    <para>
     Ce didacticiel vous explique comment <guimenu>Créer un produit complémentaire de toutes pièces</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Entrez le nom (<guimenu>Libellé du produit complémentaire</guimenu>) et la version de votre produit complémentaire, et renseignez les options supplémentaires suivantes :
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Sous <guimenu>Produit requis</guimenu>, sélectionnez le produit SUSE Linux pour lequel le produit complémentaire doit être créé.
      </para>
     </listitem>
     <listitem>
      <para>
       Sélectionnez le chemin d'accès à un répertoire contenant les paquetages de produits complémentaires.
      </para>
     </listitem>
     <listitem>
      <para>
       Vous pouvez éventuellement choisir le chemin d'accès à un répertoire contenant les paquetages RPM sous <guimenu>Produit requis</guimenu>. En règle générale, ces paquetages proviennent du produit requis (déjà choisi) et ne font pas partie du produit complémentaire proprement dit, mais d'autres paquetages du produit complémentaire en dépendent. Ces paquetages ne seront pas ajoutés au produit complémentaire, mais ils pourront être utilisés pour créer des modèles.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Chaque support d'installation comprend un fichier de contenu et un fichier de produit définissant le produit complémentaire. Utilisez cette boîte de dialogue pour fournir les données relatives aux deux fichiers. Sélectionnez une entrée et cliquez sur <guimenu>Modifier</guimenu> pour définir ou modifier une valeur. Vous pouvez également double-cliquer sur une entrée. Pour plus d'informations sur les valeurs acceptables, consultez la section <guimenu>Aide</guimenu>.
    </para>
    <para>
     Pour importer les valeurs d'un fichier de produit ou de contenu existant, sélectionnez le bouton <guimenu>Importer</guimenu> correspondant.
    </para>
    <para>
     Vous devez saisir, au minimum, des valeurs pour les sections <guimenu>Architectures du produit</guimenu>, <guimenu>Nom du produit</guimenu> et <guimenu>Nom du fournisseur</guimenu> du fichier de contenu. Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Entrez ou modifiez les descriptions du paquetage sur l'écran suivant. Cliquez sur <guimenu>Ajouter une langue</guimenu> pour insérer une nouvelle langue et ajouter des descriptions traduites (cette étape est facultative). Vous pouvez également <guimenu>Importer</guimenu> des descriptions de paquetage existantes.
    </para>
    <para>
     Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Vous pouvez éventuellement ajouter des modèles à l'étape suivante. Ceux-ci permettent de regrouper vos paquetages RPM. Cliquez sur <guimenu>Nouveau</guimenu> pour ajouter le nom d'un nouveau modèle et modifier les attributs correspondants dans la liste ci-dessous. Cochez la case <guimenu>Modèle requis</guimenu> pour les modèles qui seront sélectionnés automatiquement lors de l'installation du produit complémentaire.
    </para>
    <para>
     Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Indiquez le chemin d'accès au répertoire de sortie. Si vous préférez créer une image ISO, cochez la case <guimenu>Créer une image ISO</guimenu> et indiquez un nom de fichier. Sélectionnez <guimenu>Créer un journal des modifications</guimenu> pour créer un fichier contenant les entrées du journal des modifications de tous les paquetages inclus dans votre produit. Vous pouvez, en outre, modifier le workflow et ajouter des fichiers :
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Cliquez sur <guimenu>Configurer le workflow…</guimenu> pour entrer des fichiers et personnaliser le workflow de votre produit. De cette manière, vous pourrez, par exemple, insérer des boîtes de dialogue supplémentaires contenant des options dans le processus d'installation du produit complémentaire. Ces éléments sont nécessaires au bon fonctionnement du produit. Pour plus d'informations, reportez-vous à la section <guimenu>Aide</guimenu>.
      </para>
     </listitem>
     <listitem>
      <para>
       Cliquez sur <guimenu>Fichiers en option</guimenu> pour ajouter les fichiers suivants à votre produit complémentaire :
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>info.txt</guimenu>
        </term>
        <listitem>
         <para>
          Fichier texte contenant des informations générales sur le produit complémentaire.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Fichiers de licence</guimenu>
        </term>
        <listitem>
         <para>
          Ajoutez des fichiers contenant des informations de licence dans plusieurs langues. Ces fichiers sont nommés <literal>licence.<replaceable>LANGUE</replaceable></literal> ; <filename>licence.fr_FR</filename>, par exemple.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Fichiers LISEZMOI</term>
        <listitem>
         <para>
          Ajoutez des fichiers LISEZMOI avec le nom de votre choix.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Entrez le contenu des fichiers dans les zones de texte correspondantes. Vous pouvez également <guimenu>Importer</guimenu> le contenu à partir d'un fichier existant.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Signez votre produit complémentaire avec votre clé GPG afin de prouver son origine. Si vous n'avez pas de clé, commencez par en créer une et entrez deux fois la phrase secrète correspondante.
    </para>
   </step>
   <step performance="required">
    <para>
     Vérifiez vos paramètres dans le résumé de configuration et cliquez ensuite sur <guimenu>Terminer</guimenu> pour continuer. Pour modifier un paramètre, cliquez sur les boutons <guimenu>Précédent</guimenu>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.addon_creator.structure">
  <title>Structure des produits complémentaires</title>

  <para>
   Un produit complémentaire contient les fichiers et répertoires suivants :
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>ARCHIVES.gz</filename>
    </term>
    <listitem>
     <para>
      Contient des informations sur tous les paquetages inclus (sortie de <command>rpm -qil</command> pour chaque paquetage). Ce fichier est compressé avec gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>Changelog</filename>
    </term>
    <listitem>
     <para>
      Contient toutes les modifications des fichiers RPM, classés par date de modification.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content</filename>
    </term>
    <listitem>
     <para>
      Fichier de contenu créé lors de la configuration du produit complémentaire.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.asc</filename>
    </term>
    <listitem>
     <para>
      Fichier de signature GPG.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.key</filename>, <filename>gpg-pubkey-<replaceable>NUMÉRO</replaceable>.asc</filename>
    </term>
    <listitem>
     <para>
      La clé publique GPG.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>INDEX.gz</filename>
    </term>
    <listitem>
     <para>
      Liste de tous les fichiers RPM. Ce fichier est compressé avec gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>ls-lR.gz</filename>
    </term>
    <listitem>
     <para>
      Liste de tous les fichiers et répertoires du support du produit complémentaire. Ce fichier est compressé avec gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>media.<replaceable>N</replaceable>/</filename>
    </term>
    <listitem>
     <para>
      Contient les fichiers et les informations de base relatives à l'ensemble des supports du produit complémentaire. Le répertoire est numéroté. Ainsi, <filename>media.1/</filename> correspond au premier support du produit complémentaire (DVD1, par exemple). Les numéros des supports supplémentaires sont consécutifs.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>suse/</filename>
    </term>
    <listitem>
     <para>
      Contient les sous-répertoires et les informations spécifiques à l'architecture, à l'exception de <filename>noarch/</filename>, qui concerne les paquetages indépendants de l'architecture, et de <filename>src/</filename>, qui concerne les paquetages sources. Les paquetages des logiciels propriétaires sont stockés sous <filename>nosrc/</filename>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
