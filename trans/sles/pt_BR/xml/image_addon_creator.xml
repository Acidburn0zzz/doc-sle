<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="image_addon_creator.xml" id="cha.addon_creator">
 <title>Criando produtos complementares com o Criador de Produto Complementar</title>
 <abstract>
  <para>
   Complemento é uma mídia especialmente desenvolvida, geralmente um CD ou DVD, que estende o <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> com o seu produto. O Criador de Produto Complementar foi desenvolvido para oferecer suporte a clientes e parceiros e simplificar a distribuição de software de terceiros para todos os produtos SUSE.
  </para>

  <para>
   Para usá-lo, você precisa instalar o pacote <systemitem class="resource">yast2-add-on-creator</systemitem> do SDK (Software Development Kit) do SUSE. O SDK é um produto complementar do SUSE Linux Enterprise e está disponível para download pelo site <ulink url="http://download.suse.com/"/>. Pesquise por <literal>SUSE Linux Enterprise Software Development Kit</literal>.
  </para>
 </abstract>
 <sect1 id="sec.addon_creator.creating">
  <title>Criando imagens</title>

  <para>
   Para criar a imagem de um produto complementar, faça o seguinte:
  </para>

  <procedure>
   <step performance="required">
    <para>
     Inicie o YaST e abra o módulo <guimenu>Criador de Complementos</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Se você nunca criou um complemento, clique em <guimenu>Criar um Complemento do Início</guimenu> para começar. Se preferir, crie o complemento com base em um produto complementar existente e especifique o caminho para o diretório que armazena os dados (também pode ser uma imagem ISO montada ou um CD/DVD).
    </para>
    <para>
     Caso já tenha criado um complemento, a janela mostrará uma lista de todos os complementos existentes. É possível <guimenu>editá-los</guimenu> ou <guimenu>apagá-los</guimenu>. Escolha <guimenu>Adicionar</guimenu> para criar um novo.
    </para>
    <para>
     Este tutorial explica como <guimenu>Criar um Complemento do Início</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Digite o nome (<guimenu>Rótulo do Produto Complementar</guimenu>) e a versão do seu complemento e forneça mais informações:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Em <guimenu>Produto Obrigatório</guimenu>, escolha o produto do SUSE Linux para o qual criar o complemento.
      </para>
     </listitem>
     <listitem>
      <para>
       Selecione o caminho para o diretório que armazena os pacotes de produtos complementares.
      </para>
     </listitem>
     <listitem>
      <para>
       Se preferir, escolha o caminho para o diretório que armazena os pacotes RPM do <guimenu>Produto Obrigatório</guimenu>. Normalmente, esses pacotes têm origem no produto obrigatório (já escolhido) e não fazem parte do complemento propriamente dito, mas outros pacotes do complemento dependem deles. Esses pacotes não serão adicionados ao produto complementar, mas podem ser usados para criar padrões.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Cada mídia de instalação inclui um arquivo de conteúdo e um arquivo de produto que definem o produto complementar. Use esta caixa de diálogo para fornecer os dados para os dois arquivos. Selecione uma entrada e escolha <guimenu>Editar</guimenu> para definir ou mudar um valor. Se preferir, clique duas vezes na entrada. Consulte a <guimenu>Ajuda</guimenu> para obter mais informações e os valores possíveis.
    </para>
    <para>
     Para importar valores de um arquivo de conteúdo ou produto existente, escolha o respectivo botão <guimenu>Importar</guimenu>.
    </para>
    <para>
     É necessário pelo menos digitar valores para <guimenu>Arquiteturas de produto</guimenu>, <guimenu>Nome do produto</guimenu> e <guimenu>Nome do fornecedor</guimenu> do arquivo de conteúdo. Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Digite ou mude as descrições dos pacotes na tela seguinte. Use <guimenu>Adicionar Idioma</guimenu> para inserir um novo idioma e adicionar descrições traduzidas (esta etapa é opcional). É possível também <guimenu>Importar</guimenu> as descrições dos pacotes existentes.
    </para>
    <para>
     Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Se preferir, adicione padrões na próxima etapa. Com os padrões, você poderá agrupar seus pacotes RPM. Use <guimenu>Novo</guimenu> para adicionar um novo nome de padrão e mude os respectivos atributos na lista abaixo. Marque <guimenu>Padrão Obrigatório</guimenu> para os padrões que serão automaticamente selecionados na instalação do produto complementar.
    </para>
    <para>
     Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Informe o caminho para o diretório de saída. Para criar uma imagem ISO, marque <guimenu>Criar Imagem ISO</guimenu> e informe o nome de arquivo. Selecione <guimenu>Create Changelog</guimenu> (Criar Registro de Mudanças) para criar um arquivo com as entradas de registro de mudanças de todos os pacotes incluídos em seu produto. Você também pode modificar o workflow e adicionar arquivos:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Use <guimenu>Configurar Workflow</guimenu> para digitar os arquivos que personalizarão o workflow de seu produto. Dessa forma, é possível inserir, por exemplo, caixas de diálogo adicionais com opções no processo de instalação do complemento, que são necessárias para a operação correta do produto. Consulte a <guimenu>Ajuda</guimenu> para obter mais informações.
      </para>
     </listitem>
     <listitem>
      <para>
       Use <guimenu>Arquivos Opcionais</guimenu> para adicionar os seguintes arquivos ao seu produto complementar:
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>info.txt</guimenu>
        </term>
        <listitem>
         <para>
          Um arquivo de texto com informações gerais sobre o produto complementar.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Arquivos de Licença</guimenu>
        </term>
        <listitem>
         <para>
          Adicione arquivos com informações de licença em diversos idiomas. Os arquivos são denominados <literal>license.<replaceable>IDIOMA</replaceable></literal>, por exemplo, <filename>license.en_US</filename>.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Arquivos README</term>
        <listitem>
         <para>
          Adicione arquivos README com um nome de sua escolha.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Insira o conteúdo dos arquivos nas respectivas caixas de texto. Se preferir, <guimenu>importe</guimenu> o conteúdo de um arquivo existente.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step performance="required">
    <para>
     Assine seu produto complementar com a chave GPG para comprovar a origem do produto. Se não tiver uma chave, você deverá criá-la primeiro e digitar a respectiva frase secreta duas vezes.
    </para>
   </step>
   <step performance="required">
    <para>
     Verifique suas definições no resumo da configuração e prossiga com <guimenu>Concluir</guimenu>. Escolha os botões <guimenu>Voltar</guimenu> para mudar alguma configuração.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.addon_creator.structure">
  <title>Estrutura do complemento</title>

  <para>
   Um produto complementar inclui os seguintes arquivos e diretórios:
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>ARCHIVES.gz</filename>
    </term>
    <listitem>
     <para>
      Apresenta informações sobre todos os pacotes incluídos (a saída de <command>rpm -qil</command> de cada pacote). Este arquivo foi comprimido com gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>Changelog</filename>
    </term>
    <listitem>
     <para>
      Inclui todas as mudanças dos arquivos RPM organizadas por data de modificação.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>conteúdo</filename>
    </term>
    <listitem>
     <para>
      O arquivo de conteúdo criado durante a configuração do complemento.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.asc</filename>
    </term>
    <listitem>
     <para>
      O arquivo de assinatura GPG.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.key</filename>, <filename>gpg-pubkey-<replaceable>NÚMERO</replaceable>.asc</filename>
    </term>
    <listitem>
     <para>
      A chave pública GPG.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>INDEX.gz</filename>
    </term>
    <listitem>
     <para>
      Uma lista de todos os arquivos RPM. Este arquivo foi comprimido com gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>ls-lR.gz</filename>
    </term>
    <listitem>
     <para>
      Uma lista de todos os arquivos e diretórios do meio do produto complementar. Este arquivo foi comprimido com gzip.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>GroupWise para Linux.<replaceable>N</replaceable>/</filename>
    </term>
    <listitem>
     <para>
      Contém arquivos com informações básicas sobre o conjunto de mídias complementares. O diretório é numerado como <filename>media.1/</filename> para o primeiro meio complementar (por exemplo, DVD1). A mídia adicional terá um número consecutivo.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>suse/</filename>
    </term>
    <listitem>
     <para>
      Contém subdiretórios com informações específicas à arquitetura. As exceções são <filename>noarch/</filename> para os pacotes independentes da arquitetura e <filename>src/</filename> para os pacotes de origem. Os pacotes de software proprietário são armazenados em <filename>nosrc/</filename>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
