<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="image_addon_creator.xml" version="5.0" xml:id="cha.addon_creator">
 <title>使用附加产品创建程序创建附加产品</title>
 <info>
      <abstract>
        <para>
    附加产品是一个经特殊设计的媒体，通常是 CD 或 DVD，可借助您的产品扩展 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。我们开发了附加产品创建程序，以向客户与合作伙伴提供支持，并简化所有 SUSE 产品的第三方软件分发。
   </para>
        <para>
    要使用附加产品创建程序，您需要安装 SUSE 软件开发包中的 <systemitem class="resource">yast2-add-on-creator</systemitem> 包。该 SDK 是 SUSE Linux Enterprise 的附加产品，可从 <link xlink:href="http://download.suse.com/"/> 下载，搜索 <literal>SUSE Linux Enterprise 软件开发包</literal>即可找到。
   </para>
      </abstract>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <sect1 xml:id="sec.addon_creator.creating">
  <title>创建映像</title>

  <para>
   要创建附加产品的映像，请执行以下操作：
  </para>

  <procedure>
   <step>
    <para>
     启动 YaST 并打开<guimenu>附加创建程序</guimenu>模块。
    </para>
   </step>
   <step>
    <para>
     如果以前尚未创建过附加产品，请单击<guimenu>从头创建附加产品</guimenu>以开始操作。或者，您可以在现有外接式附件的基础上创建外接式附件。请指定包含数据的目录路径，该目录也可以是装入的 ISO 映像或 CD/DVD。
    </para>
    <para>
     如果您之前已经创建了附加产品，窗口中会显示所有现有附加产品的列表。您可以对它们执行<guimenu>编辑</guimenu>或<guimenu>删除</guimenu>操作。选择<guimenu>添加</guimenu>可以创建新的附加产品。
    </para>
    <para>
     本教程介绍如何<guimenu>从头创建附加产品</guimenu>。
    </para>
   </step>
   <step>
    <para>
     输入附加产品的名称（<guimenu>附加产品标签</guimenu>）和版本，并提供以下附加信息：
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       在<guimenu>必需产品</guimenu>下，选择要为其创建附加产品的 SUSE Linux 产品。
      </para>
     </listitem>
     <listitem>
      <para>
       选择包含附加产品包的目录的路径。
      </para>
     </listitem>
     <listitem>
      <para>
       （选择性）从<guimenu>必需产品</guimenu>中选择包含 RPM 包的目录的路径。通常，这些包源自所需的产品（已选择）而不属于附加产品本身，但附加产品中的其他包依赖于这些包。这些包将不会添加到附加产品中，但可用来创建模式。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     每个安装媒体包含一个内容文件，以及一个定义附加产品的产品文件。使用此对话框可以提供有关这两个文件的数据。选择一项，然后选择<guimenu>编辑</guimenu>以设置或更改相关的值。或者，也可以双击某一项。有关更多信息和可用的值，请参见<guimenu>帮助</guimenu>。
    </para>
    <para>
     要从现有内容文件或产品文件导入值，请选择对应的<guimenu>导入</guimenu>按钮。
    </para>
    <para>
     至少需要输入内容文件的<guimenu>产品体系结构</guimenu>、<guimenu>产品名称</guimenu>和<guimenu>供应商名称</guimenu>值。按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     在随后出现的屏幕中输入或更改包说明。使用<guimenu>添加语言</guimenu>插入新的语言并添加已翻译的描述（此步骤是可选的）。您也可以<guimenu>导入</guimenu>现有的包描述。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     在接下来的步骤中，有选择性地添加模式。通过模式可以将 RPM 包分组。使用<guimenu>新建</guimenu>添加新的模式名称并更改以下列表中的相应属性。对于在安装附加产品时要自动选择予以安装的模式，请选中<guimenu>必需模式</guimenu>。
    </para>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     提供输出目录的路径。如果您想要创建 ISO 映像，请选中<guimenu>创建 ISO 映像</guimenu>并提供一个文件名。选择<guimenu>创建更改日志</guimenu>，以创建一个包含产品中所有包的更改日志项的文件。此外，您可以修改工作流程以及添加文件：
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       使用<guimenu>配置工作流程</guimenu>输入文件以自定义产品工作流程。举例来说，您可以通过这种方式在附加产品安装过程中插入包含选项的附加对话框，以便能够正常操作产品。有关更多信息，请参见<guimenu>帮助</guimenu>。
      </para>
     </listitem>
     <listitem>
      <para>
       使用<guimenu>可选文件</guimenu>将下列文件添加到您的附加产品：
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>info.txt</guimenu>
        </term>
        <listitem>
         <para>
          一个文本文件，其中包含有关附加产品的一般信息。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>许可证文件</guimenu>
        </term>
        <listitem>
         <para>
          添加包含许可证信息的文件（采用不同的语言）。这些文件命名为 <literal>license.<replaceable>LANGUAGE</replaceable></literal>，例如 <filename>license.en_US</filename>。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>README 文件</term>
        <listitem>
         <para>
          添加以您所选名称命名的 README 文件。
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       请在相应的文本框中输入文件的内容。或者，可以从现有文件中<guimenu>导入</guimenu>内容。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     按<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     使用 GPG 密钥签署您的附加产品，以提供产品来源的证据。如果没有密钥，请先创建一个，然后输入相应的密码短语两次。
    </para>
   </step>
   <step>
    <para>
     在配置摘要中检查设置，然后按<guimenu>完成</guimenu>继续。选择<guimenu>上一步</guimenu>按钮可以更改设置。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.addon_creator.structure">
  <title>附加产品结构</title>

  <para>
   附加产品包含下列文件和目录：
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>ARCHIVES.gz</filename>
    </term>
    <listitem>
     <para>
      包含有关所有内含包的信息（每个包的 <command>rpm -qil</command> 输出）。此文件已经过 gzip 压缩。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>Changelog</filename>
    </term>
    <listitem>
     <para>
      包含 RPM 文件的所有更改，内容按更改日期排序。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content</filename>
    </term>
    <listitem>
     <para>
      安装附加产品期间创建的内容文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.asc</filename>
    </term>
    <listitem>
     <para>
      GPG 签名文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.key</filename>，<filename>gpg-pubkey-<replaceable>NUMBER</replaceable>.asc</filename>
    </term>
    <listitem>
     <para>
      公共 GPG 密钥。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>INDEX.gz</filename>
    </term>
    <listitem>
     <para>
      所有 RPM 文件的列表。此文件已经过 gzip 压缩。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>ls-lR.gz</filename>
    </term>
    <listitem>
     <para>
      附加产品媒体中所有文件与目录的列表。此文件已经过 gzip 压缩。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>media.<replaceable>N</replaceable>/</filename>
    </term>
    <listitem>
     <para>
      包含储存有关附加产品媒体集的基本信息的文件。目录会编号，<filename>media.1/</filename> 表示第一个附加产品媒体（例如 DVD1）。附加媒体具有连续编号。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>suse/</filename>
    </term>
    <listitem>
     <para>
      包含带有特定于体系结构信息的子目录。例外是 <filename>noarch/</filename> 用于独立于体系结构的包，<filename>src/</filename> 用于源包。专有软件包储存在 <filename>nosrc/</filename> 下。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
