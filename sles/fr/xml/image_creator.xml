<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="image_creator.xml" version="5.0" xml:id="cha.imgcreator">
 <title>Création d'images avec YaST Image Creator</title>
 <info>
      <abstract>
        <para>
    YaST Image Creator est une interface graphique destinée à l'outil de création d'images KIWI (pour plus d'informations sur KIWI, rendez-vous sur le site <link xlink:href="http://doc.opensuse.org/projects/kiwi/doc/"/>). Le module Image Creator vous permet de créer une configuration KIWI, ou d'importer une configuration existante et de la modifier, puis de créer l'image une fois la configuration terminée. Les utilisateurs chevronnés peuvent enregistrer la configuration sur disque, puis la modifier et créer l'image manuellement.
   </para>
        <para>
    Pour qu'il soit possible d'utiliser ce module, vous devez installer le paquetage <systemitem class="resource">yast2-product-creator</systemitem> à partir du kit SDK SUSE. Le kit SDK est un module pour SUSE Linux Enterprise. Il est disponible via un canal en ligne à partir du SUSE Customer Center. Vous pouvez également le télécharger sur le site <link xlink:href="http://download.suse.com/"/>. (Recherchez <literal>SUSE Linux Enterprise Software Development Kit</literal>). Reportez-vous au chapitre <xref linkend="cha.add-ons"/> pour obtenir des informations détaillées.
   </para>
      </abstract>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
        <dm:translation>oui</dm:translation>
      </dm:docmanager>
    </info>
    <sect1 xml:id="sec.img.create">
  <title>Création d'images</title>

  <para>
   Pour créer une image d'un produit, procédez comme suit :
  </para>

  <procedure>
   <step>
    <para>
     Démarrez YaST et ouvrez le module <guimenu>Image Creator</guimenu>.
    </para>
   </step>
   <step>
    <para>
     La fenêtre affiche la liste de toutes les configurations d'images existantes. Vous pouvez les <guimenu>modifier</guimenu> ou les <guimenu>supprimer</guimenu> en sélectionnant l'option appropriée. Sélectionnez <guimenu>Ajouter</guimenu> pour en créer un nouveau.
    </para>
   </step>
   <step>
    <para>
     Entrez le nom de la nouvelle <guimenu>Configuration Kiwi</guimenu>, puis indiquez si vous souhaitez la créer de toutes pièces ou vous baser sur une configuration KIWI existante. Dans ce dernier cas, indiquez le chemin d'accès à une configuration KIWI existante, de telle sorte que le module de création d'images puisse l'importer.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez le type d'image à créer. Plusieurs options sont disponibles : <guimenu>Image ISO animée</guimenu>, <guimenu>Image Xen</guimenu> ou <guimenu>Image de disque virtuel</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez le répertoire de sortie dans lequel vous souhaitez stocker la configuration KIWI.
    </para>
   </step>
   <step>
    <para>
     Si vous exécutez Image Creator sur une architecture 64 bits, vous pouvez forcer KIWI à configurer l'image pour une architecture 32 bits, voire la limiter uniquement à l'architecture i586.
    </para>
   </step>
   <step>
    <para>
     Ajoutez la liste des dépôts de paquetages à utiliser pour votre configuration KIWI. Cliquez sur <guimenu>Ajouter</guimenu> pour ajouter un dépôt ou sur <guimenu>Ajouter à partir du système</guimenu> pour ajouter des dépôts configurés dans le système où s'exécute Image Creator. Si vous devez modifier les détails d'un dépôt existant, sélectionnez-le et cliquez ensuite sur <guimenu>Modifier</guimenu>. Pour supprimer un dépôt inutile, sélectionnez-le et cliquez ensuite sur <guimenu>Supprimer</guimenu>.
    </para>
    <para>
     Cliquez ensuite sur <guimenu>Suivant</guimenu>.
    </para>
    <figure xml:id="fig.imgcreator.repos">
     <title>Modification de dépôt dans Image Creator</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     L'écran suivant comporte quatre onglets. Vous pouvez définir davantage d'options de configuration prises en charge par KIWI afin de régler avec précision l'image obtenue.
    </para>
    <para>
     Dans l'onglet <guimenu>Configuration d'image</guimenu>, vous pouvez définir la version et la taille de l'image, puis modifier le logiciel sélectionné pour l'image de manière détaillée. Vous pouvez spécifier des modèles/paquetages pour trois sections de paquetage : paquetages inclus dans l'image et dans l'amorce (bootstrap), ainsi que ceux destinés à être supprimés de l'image.
    </para>
    <figure xml:id="fig.imgcreator.tabs">
     <title>Configuration KIWI détaillée dans le module Image Creator</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="image_creator_tabs.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     Pour modifier la liste des paquetages et/ou des modèles destinés à être installés (ou ignorés), cliquez sur <guimenu>Modifier</guimenu>. La fenêtre <guimenu>YaST Package Selector</guimenu> (Sélecteur de paquetages YaST) s'ouvre alors, dans laquelle vous pouvez effectuer votre sélection.
    </para>
    <para>
     Dans l'onglet <guimenu>Description</guimenu>, indiquez les informations relatives au créateur de l'image, à la description et aux paramètres locaux.
    </para>
    <para>
     L'onglet <guimenu>Utilisateurs</guimenu> vous permet d'ajouter des utilisateurs qui doivent être disponibles sur le système cible.
    </para>
    <para>
     Vous pourrez ensuite modifier les <guimenu>Scripts</guimenu> de configuration utilisés pour créer votre image.
    </para>
    <para>
     Pour terminer, utilisez l'onglet <guimenu>Répertoires</guimenu> pour configurer le répertoire à l'aide de scripts et de la configuration système.
    </para>
   </step>
   <step>
    <para>
     Une fois la configuration de l'image terminée, cliquez sur <guimenu>Terminer</guimenu> pour la créer. YaST vous demande de confirmer votre sélection. Si vous ne souhaitez pas procéder à la création, la configuration est enregistrée et vous revenez à l'écran d'aperçu. Si vous confirmez la création, KIWI est démarré et une fenêtre de progression s'affiche avec le fichier journal KIWI.
    </para>
    <para>
     Si la création de l'image s'effectue correctement, elle est enregistrée dans le répertoire de sortie spécifié précédemment.
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
