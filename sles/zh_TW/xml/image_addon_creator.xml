<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="image_addon_creator.xml" version="5.0" xml:id="cha.addon_creator">
 <title>使用附加產品建立程式建立附加產品</title>
 <info>
      <abstract>
        <para>
    附加產品是一個經特殊設計的媒體，通常是 CD 或 DVD，用於憑藉您的產品延伸 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。我們開發了附加產品建立程式，以向客戶與合作夥伴提供支援，並簡化針對所有 SUSE 產品的協力廠商軟體配送。
   </para>
        <para>
    若要使用附加產品建立程式，您需要安裝 SUSE 軟體開發套件中的 <systemitem class="resource">yast2-add-on-creator</systemitem> 套件。該 SDK 是 SUSE Linux Enterprise 的附加產品，可從 <link xlink:href="http://download.suse.com/"/> 下載。請搜尋 <literal>SUSE Linux Enterprise 軟體開發套件</literal>。
   </para>
      </abstract>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <sect1 xml:id="sec.addon_creator.creating">
  <title>建立影像</title>

  <para>
   若要建立附加產品的影像，請執行下列操作：
  </para>

  <procedure>
   <step>
    <para>
     啟動 YaST，然後開啟<guimenu>附加產品建立程式</guimenu>模組。
    </para>
   </step>
   <step>
    <para>
     如果以前尚未建立過附加產品，請按一下<guimenu>從頭建立附加產品</guimenu>以開始操作。或者，您可以在現有附加產品的基礎上建立附加產品。指定包含資料的目錄路徑 — 該目錄也可以是掛接的 ISO 影像或 CD/DVD。
    </para>
    <para>
     如果您之前已經建立了附加產品，視窗中會顯示所有現有附加產品的清單。您可以對它們執行<guimenu>編輯</guimenu>或<guimenu>刪除</guimenu>操作。選擇<guimenu>新增</guimenu>可以建立新的附加產品。
    </para>
    <para>
     本教學課程介紹如何<guimenu>從頭建立附加產品</guimenu>。
    </para>
   </step>
   <step>
    <para>
     輸入附加產品的名稱 (<guimenu>附加產品標籤</guimenu>) 和版本，並提供以下額外資訊：
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       在<guimenu>需要的產品</guimenu>下，選擇要為其建立附加產品的 SUSE Linux 產品。
      </para>
     </listitem>
     <listitem>
      <para>
       選取包含附加產品套件之目錄的路徑。
      </para>
     </listitem>
     <listitem>
      <para>
       (選擇性) 從<guimenu>需要的產品</guimenu>中，選擇包含 RPM 套件之目錄的路徑。通常，這些套件源自需要的產品 (已選擇) 而不屬於附加產品自身，但附加產品中的其他套件依存於這些套件。這些套件將不會新增至附加產品，但可以用來建立模式。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     按<guimenu>下一步</guimenu>繼續。
    </para>
   </step>
   <step>
    <para>
     每個安裝媒體都包含一個內容檔案，以及一個定義附加產品的產品檔案。使用此對話方塊可以提供關於這兩個檔案的資料。選取一個項目，然後選擇<guimenu>編輯</guimenu>以設定或變更相關的值。或者，也可以連按兩下某個項目。如需詳細資訊和可用的值，請參閱<guimenu>說明</guimenu>。
    </para>
    <para>
     若要從現有內容檔案或產品檔案輸入值，請選擇相應的<guimenu>輸入</guimenu>按鈕。
    </para>
    <para>
     至少需要輸入內容檔案的<guimenu>產品架構</guimenu>、<guimenu>產品名稱</guimenu>和<guimenu>廠商名稱</guimenu>值。按<guimenu>下一步</guimenu>繼續。
    </para>
   </step>
   <step>
    <para>
     在接下來的螢幕中輸入或變更套件描述。使用<guimenu>新增語言</guimenu>插入新的語言並新增翻譯後的描述 (這是選擇性步驟)。您也可以<guimenu>輸入</guimenu>現有的套件描述。
    </para>
    <para>
     按<guimenu>下一步</guimenu>繼續。
    </para>
   </step>
   <step>
    <para>
     (選擇性) 在接下來的步驟中新增模式。使用這些模式，您就可以對 RPM 套件進行分組。使用<guimenu>新增</guimenu>以新增新的模式名稱並變更下面清單中的相應屬性。對於在安裝附加產品時會自動選取予以安裝的模式，請核取<guimenu>需要的模式</guimenu>。
    </para>
    <para>
     按<guimenu>下一步</guimenu>繼續。
    </para>
   </step>
   <step>
    <para>
     提供輸出目錄的路徑。如果您想要建立 ISO 影像，請核取<guimenu>建立 ISO 影像</guimenu>並提供一個檔案名稱。選取<guimenu>建立變更記錄</guimenu>，以建立一個包含產品中所有套件變更記錄項目的檔案。此外，您可以修改工作流程及新增檔案：
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       使用<guimenu>設定工作流程</guimenu>可輸入檔案以自定產品工作流程。舉例來說，您可以憑此操作在附加產品安裝程序中插入一些包含選項的額外對話方塊，以便能夠正確操作產品。如需詳細資訊，請參閱<guimenu>說明</guimenu>。
      </para>
     </listitem>
     <listitem>
      <para>
       使用<guimenu>選擇性檔案</guimenu>可將下列檔案新增至您的附加產品：
      </para>
      <variablelist>
       <varlistentry>
        <term><guimenu>info.txt</guimenu>
        </term>
        <listitem>
         <para>
          一個文字檔，其中包含關於附加產品的一般資訊。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>授權檔案</guimenu>
        </term>
        <listitem>
         <para>
          新增包含采用各種語言之授權資訊的檔案。這些檔案命名為 <literal>license.<replaceable>LANGUAGE</replaceable></literal>，例如 <filename>license.en_US</filename>。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>讀我檔案</term>
        <listitem>
         <para>
          新增以您所選名稱命名的讀我檔案。
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       請在相應的文字方塊中輸入檔案的內容。或者，可以<guimenu>輸入</guimenu>現有檔案中的內容。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     按<guimenu>下一步</guimenu>繼續。
    </para>
   </step>
   <step>
    <para>
     使用 GPG 金鑰簽署您的附加產品，以提供產品來源證明。如果您沒有金鑰，請先建立一個金鑰，然後分別輸入兩次密碼片語。
    </para>
   </step>
   <step>
    <para>
     在組態摘要中檢查設定，然後按<guimenu>完成</guimenu>繼續。選擇<guimenu>上一步</guimenu>按鈕可以變更設定。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.addon_creator.structure">
  <title>附加產品架構</title>

  <para>
   附加產品包含下列檔案和目錄：
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>ARCHIVES.gz</filename>
    </term>
    <listitem>
     <para>
      包含關於所有內含套件的資訊 (每個套件的 <command>rpm -qil</command> 輸出)。此檔案會透過 gzip 壓縮。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>變更記錄</filename>
    </term>
    <listitem>
     <para>
      包含 RPM 檔案的所有變更，內容按變更日期排序。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content</filename>
    </term>
    <listitem>
     <para>
      設定附加產品期間建立的內容檔案。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.asc</filename>
    </term>
    <listitem>
     <para>
      GPG 簽名檔案。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>content.key</filename>、<filename>gpg-pubkey-<replaceable>NUMBER</replaceable>.asc</filename>
    </term>
    <listitem>
     <para>
      公用 GPG 金鑰。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>INDEX.gz</filename>
    </term>
    <listitem>
     <para>
      所有 RPM 檔案的清單。此檔案會透過 gzip 壓縮。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>ls-lR.gz</filename>
    </term>
    <listitem>
     <para>
      附加產品媒體中所有檔案與目錄的清單。此檔案會透過 gzip 壓縮。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>media.<replaceable>N</replaceable>/</filename>
    </term>
    <listitem>
     <para>
      包含儲存關於附加產品媒體集之基本資訊的檔案。目錄會被編號，<filename>media.1/</filename> 表示第一個附加產品媒體 (例如 DVD1)。其餘媒體都依此順序編號。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>suse/</filename>
    </term>
    <listitem>
     <para>
      包含專門用於儲存架構資訊的子目錄。其中的例外是儲存架構獨立套件的 <filename>noarch/</filename> 與儲存來源套件的 <filename>src/</filename>。專屬軟體套件儲存於 <filename>nosrc/</filename> 下。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
