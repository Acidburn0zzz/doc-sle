<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_migration.xml" version="5.0" xml:id="cha.update.spmigration">
  <title>서비스 팩 마이그레이션</title>
  <info>
    <abstract>
      <para>SUSE에서는 이제 온라인 서비스 팩 마이그레이션을 위해 시스템 관리자에게 흥미로운 몇 가지 기능이 포함된 새로운 도구를 제공합니다. 여기에는 단순한 명령줄 도구, 직관적인 그래픽 사용자 인터페이스, 서비스 팩의 <quote>롤백</quote> 지원 등이 포함됩니다. 이 장에서는 새 도구를 사용하여 서비스 팩 마이그레이션을 수행하는 방법을 단계별로 설명합니다.</para>
    </abstract>
  </info>

  <sect1 xml:id="sec.update.migr.supported-scenarios-and-versions">
    <title>지원되는 시나리오 및 버전</title>
    <para>SUSE는 오프라인 또는 온라인에서 다음과 같은 시나리오를 지원합니다.</para>

    <variablelist>
      <varlistentry>
        <term>온라인</term>
        <listitem>
          <para>SUSE 고객 센터, SMT(Subscription Management Tool: 구독 관리 도구), SUSE Manager</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>오프라인</term>
        <listitem>
          <para>부팅 DVD, USB 스틱, ISO 이미지, AutoYaST, <quote>일반 RPM</quote> 및 타사 도구</para>
        </listitem>
      </varlistentry>
    </variablelist>
    
    <para>다음 버전이 지원됩니다.</para>
    
    <variablelist>
      <varlistentry>
        <term>온라인</term>
        <listitem>
          <para>SUSE Linux Enterprise 12</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>오프라인</term>
        <listitem>
          <para>SUSE Linux Enterprise 11 SP3/SP4, SUSE Linux Enterprise 12</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>수동/타사</term>
        <listitem>
          <para>SUSE Linux Enterprise 12</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect1>

  <sect1 xml:id="sec.update.migr.workflow">
    <title>서비스 팩 마이그레이션 워크플로</title>
    <para>서비스 팩 마이그레이션은 YaST, <command>zypper</command>, AutoYaST, RPM 또는 타사 도구로 실행할 수 있습니다. 이 장에서는 처음 두 가지 방법만 설명합니다. 방법에 관계없이 서비스 팩 마이그레이션은 다음 단계로 구성됩니다.</para>
    <orderedlist>
      <listitem>
        <para>가능한 마이그레이션 대상을 찾습니다.</para>
      </listitem>
      <listitem>
        <para>마이그레이션 대상을 선택합니다.</para>
      </listitem>
      <listitem>
        <para>새 리포지토리를 요청하고 활성화합니다.</para>
      </listitem>
      <listitem>
        <para>마이그레이션을 실행합니다.</para>
      </listitem>
    </orderedlist>

    
    <para>마이그레이션 대상 목록은 설치한 제품에 따라 다릅니다. 새 SP를 아직 사용할 수 없는 확장을 설치한 경우 마이그레이션 대상이 제공되지 않을 수 있습니다.</para>
    <para>호스트에 사용 가능한 마이그레이션 대상 목록은 SUSE 고객 센터에서 항상 검색할 수 있으며, 설치한 제품 또는 확장에 따라 다르고 시간에 따라 변경될 수 있습니다. 예를 들어 SLE12 GA에서 SP2로의 마이그레이션이 한 호스트에서는 가능하지만 다른 호스트에서는 가능하지 않을 수 있습니다.</para>
  </sect1>

  <sect1 xml:id="sec.update.migr.yast.onlinemigr">
    <title>YaST(온라인 마이그레이션 도구)를 사용한 마이그레이션</title>
    <para>YaST를 사용하여 서비스 팩 마이그레이션을 수행하려면 <guimenu>온라인 마이그레이션</guimenu> 도구를 사용합니다. 기본적으로 YaST는 타사 리포지토리에서 패키지를 설치하지 않습니다. 타사 리포지토리에서 패키지가 설치된 경우 YaST는 패키지가 SUSE에서 가져오는 동일한 패키지로 바뀌지 않도록 방지합니다.
    </para>
    <procedure xml:id="pro.update.migr.yast">
      <step>
        <para>최신 업데이트를 설치하여 <guimenu>온라인 마이그레이션</guimenu> 모듈을 가져옵니다.</para>
      </step>
      <step>
        <para>yast2-migration <package>패키지 및</package>
          해당 종속성을 설치합니다. </para>
      </step>
      <step>
        <para>YaST를 재시작합니다. 그렇지 않으면 새로 설치한 모듈이 관리 센터에 표시되지 않습니다.</para>
      </step>
      <step>
        <para>YaST의 <guimenu>시스템</guimenu> 섹션에서 <guimenu>온라인 마이그레이션</guimenu> 모듈을 시작합니다. </para>
        <para>가능한 마이그레이션 대상 및 요약이 표시됩니다.</para>
      </step>
      <step>
        <para>마이그레이션 대상을 선택하고 <guimenu>[다음]</guimenu>을 눌러 계속합니다.</para>
      </step>
      <step>
        <para>온라인 마이그레이션 도구가 업데이트 리포지토리를 제공하는 경우 이 리포지토리를 사용할지 여부를 결정합니다. <guimenu>[예]</guimenu>를 눌러 계속하는 것이 좋습니다.
          
        </para>
      </step>
      <step>
        <para><remark>toms 2015-09-09: FATE#319140</remark> 온라인 마이그레이션 도구가 DVD 또는 로컬 서버에서 구식 리포지토리를 찾는 경우 해당 리포지토리를 비활성화하는 것이 좋습니다. SUSE 고객 센터 또는 구독 관리 도구의 오래된 리포지토리는 자동으로 제거됩니다.
        </para>
      </step>
      <step>
        <para>요약을 확인하고 <guimenu>[다음]</guimenu>을 눌러 마이그레이션을 계속합니다. <guimenu>업데이트 시작</guimenu>을 눌러 확인합니다.</para>
      </step>
      <step>
        <para>마이그레이션이 끝나면 시스템을 재시작합니다.</para>
      </step>
    </procedure>
  </sect1>

  <sect1 xml:id="sec.update.migr.zypper.onlinemigr">
    <title>Zypper를 사용한 마이그레이션</title>
    <para>Zypper를 사용하여 서비스 팩 마이그레이션을 수행하려면 명령줄 도구 <command>zypper</command> <option>migration</option>을 사용합니다.</para>
    <procedure>
      <step>
        <para>SUSE Linux Enterprise 12 시스템에 로그인합니다.</para>
      </step>
      <step>
        <para>최신 업데이트를 설치합니다.</para>
      </step>
      <step>
        <para>zypper-migration-plugin
            <package>패키지 및</package> 해당 종속성을 설치합니다. </para>
      </step>
      <step>
        <para><command>zypper</command> <option>migration</option>을 실행합니다.</para>
        <screen><prompt>root # </prompt><command>zypper</command> migration
Executing 'zypper  patch-check'

Refreshing service 'SUSE_Linux_Enterprise_Server_12_x86_64'.
Loading repository data...
Reading installed packages...
0 patches needed (0 security patches)

Available migrations:

    1 | SUSE Linux Enterprise Server 12 SP1 x86_64</screen>
        <remark>toms 2015-09-07: From FATE#319128</remark>
        <para>기본적으로 Zypper는 <command>zypper</command> <option>dup</option>로 전달되는 <option>--no-allow-vendor-change</option> 옵션을 사용합니다. 타사 리포지토리에서 패키지가 설치된 경우 이 옵션은 패키지가 SUSE에서 가져오는 동일한 패키지로 바뀌지 않도록 방지합니다.
        </para>
      </step>
      <step>
        <para>
        <remark>toms 2015-09-09: FATE#319140</remark> Zypper가 DVD 또는 로컬 서버에서 구식 리포지토리를 찾는 경우 해당 리포지토리를 비활성화하는 것이 좋습니다. 오래된 SCC 또는 SMT 리포지토리는 자동으로 제거됩니다.
        </para>
      </step>
      <step>
        <para>모든 변경 사항 특히, 제거될 패키지를 검토합니다. <literal>y</literal>를 입력하여 계속합니다(업그레이드할 정확한 패키지 수는 시스템에 따라 다를 수 있음).</para>
        <screen>266 packages to upgrade, 54 to downgrade, 17 new, 8 to reinstall, 5 to remove, 1 to change arch.
Overall download size: 285.1 MiB. Already cached: 0 B  After the operation, additional 139.8 MiB will be used.
Continue? [y/n/? shows all options] (y):</screen>
        <para>셸에서 스크롤하려면 <keycombo> <keycap function="shift"/> <keycap function="pageup"/> </keycombo> 또는 <keycombo> <keycap function="shift"/> <keycap function="pagedown"/> </keycombo> 키를 사용합니다.</para>
      </step>
      <step>
        <para>마이그레이션이 끝나면 시스템을 재시작합니다.</para>
      </step>
    </procedure>
  </sect1>

</chapter>
